/** 
 * Kendo UI v2019.1.220 (http://www.telerik.com/kendo-ui)                                                                                                                                               
 * Copyright 2019 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.                                                                                      
 *                                                                                                                                                                                                      
 * Kendo UI commercial licenses may be obtained at                                                                                                                                                      
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  
 * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       
                                                                                                                                                                                                       

*/
!function(e,define){define("util/text-metrics.min",["kendo.core.min"],e)}(function(){!function(e){function t(e){return(e+"").replace(i,s)}function o(e){var t,o=[];for(t in e)o.push(t+e[t]);return o.sort().join("")}function r(e){var t,o=2166136261;for(t=0;t<e.length;++t)o+=(o<<1)+(o<<4)+(o<<7)+(o<<8)+(o<<24),o^=e.charCodeAt(t);return o>>>0}function l(){return{width:0,height:0,baseline:0}}function a(e,t,o){return u.current.measure(e,t,o)}var n,i,s,d,c,u;window.kendo.util=window.kendo.util||{},n=kendo.Class.extend({init:function(e){this._size=e,this._length=0,this._map={}},put:function(e,t){var o=this._map,r={key:e,value:t};o[e]=r,this._head?(this._tail.newer=r,r.older=this._tail,this._tail=r):this._head=this._tail=r,this._length>=this._size?(o[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},get:function(e){var t=this._map[e];if(t)return t===this._head&&t!==this._tail&&(this._head=t.newer,this._head.older=null),t!==this._tail&&(t.older&&(t.older.newer=t.newer,t.newer.older=t.older),t.older=this._tail,t.newer=null,this._tail.newer=t,this._tail=t),t.value}}),i=/\r?\n|\r|\t/g,s=" ",d={baselineMarkerSize:1},"undefined"!=typeof document&&(c=document.createElement("div"),c.style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;"),u=kendo.Class.extend({init:function(t){this._cache=new n(1e3),this.options=e.extend({},d,t)},measure:function(e,a,n){var i,s,d,u,p,h,f,g,m;if(void 0===n&&(n={}),!e)return l();if(i=o(a),s=r(e+i),d=this._cache.get(s))return d;u=l(),p=n.box||c,h=this._baselineMarker().cloneNode(!1);for(f in a)g=a[f],void 0!==g&&(p.style[f]=g);return m=n.normalizeText!==!1?t(e):e+"",p.textContent=m,p.appendChild(h),document.body.appendChild(p),m.length&&(u.width=p.offsetWidth-this.options.baselineMarkerSize,u.height=p.offsetHeight,u.baseline=h.offsetTop+this.options.baselineMarkerSize),u.width>0&&u.height>0&&this._cache.put(s,u),p.parentNode.removeChild(p),u},_baselineMarker:function(){var e=document.createElement("div");return e.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",e}}),u.current=new u,kendo.deepExtend(kendo.util,{LRUCache:n,TextMetrics:u,measureText:a,objectKey:o,hashKey:r,normalizeText:t})}(window.kendo.jQuery)},"function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()}),function(e,define){define("kendo.grid.min",["kendo.data.min","kendo.columnsorter.min","kendo.editable.min","kendo.window.min","kendo.filtermenu.min","kendo.columnmenu.min","kendo.groupable.min","kendo.pager.min","kendo.selectable.min","kendo.sortable.min","kendo.reorderable.min","kendo.resizable.min","kendo.mobile.actionsheet.min","kendo.mobile.pane.min","kendo.ooxml.min","kendo.excel.min","kendo.progressbar.min","kendo.pdf.min"],e)}(function(){return function(e,t){function o(e,t){return"["+xe.attr(e)+"="+t+"]"}function r(e){return Array(e+1).join('<td class="k-group-cell">&nbsp;</td>')}function l(e){var t,o=" ";if(e){if(typeof e===$t)return e;for(t in e)""!==e[t]&&(o+=t+'="'+e[t]+'"')}return o}function a(t,o){e("th, th .k-grid-filter, th .k-link",t).add(document.body).css("cursor",o)}function n(t,o,r,l,a){var n,i=o;for(o=e(),a=a||1,n=0;n<a;n++)o=o.add(t.eq(i+n));"number"==typeof r?o[l?"insertBefore":"insertAfter"](t.eq(r)):o.appendTo(r)}function i(t,o,r){return e(t).add(o).find(r)}function s(e,t,o){var r,l,a,n;for(o=Be(o)?o:[o],r=0,l=o.length;r<l;r++)a=o[r],Ae(a)&&a.click&&(n=a.name||a.text,t.on(Nt+nt,"a.k-grid-"+(n||"").replace(/\s/g,""),{commandName:n},Ne(a.click,e)))}function d(e,t,o){return qe(e,function(e){var r,l;return e=typeof e===$t?{field:e}:e,_(e)&&!o||(e.attributes=X(e.attributes),e.footerAttributes=X(e.footerAttributes),e.headerAttributes=X(e.headerAttributes),r=!0),e.columns&&(e.columns=d(e.columns,t,r)),l=xe.guid(),e.headerAttributes=We({id:l},e.headerAttributes),We({encoded:t,hidden:r},e)})}function c(e,t){var o=[];return u(e,t,o),o[o.length-1]}function u(e,t,o){var r,l;for(o=o||[],r=0;r<t.length;r++){if(e===t[r])return!0;if(t[r].columns){if(l=o.length,o.push(t[r]),u(e,t[r].columns,o))return!0;o.splice(l,o.length-l)}}return!1}function p(e,t){h(e,t,t)}function h(e,t,o){var r=o?Z:X;e.hidden=!t,e.attributes=r(e.attributes),e.footerAttributes=r(e.footerAttributes),e.headerAttributes=r(e.headerAttributes)}function f(e,t){g(e);var o=e._hideByMedia;h(e,t,o?e.matchesMedia:t)}function g(e){e.matchesMedia=m(e)}function m(e){return e&&(C(e.media)||!C(e.media)&&xe.matchesMedia(e.media))}function b(){return"none"!==this.style.display}function k(t){return"none"!==e(t)[0].style.display}function _(e){return v([e]).length>0}function v(e){return Pe(e,function(e){var t=!e.hidden&&e.matchesMedia!==!1;return t&&e.columns&&(t=v(e.columns).length>0),t})}function w(e){var t,o,r=[];for(o=0;o<e.length;o++){if(t=e[o],!C(t.media)){if(!C(t.minScreenWidth))throw Error("Using 'media' and 'minScreenWidth' options at the same time is not supported.");r.push(t)}t.columns&&(r=r.concat(w(t.columns)))}return r}function C(e){return t===e}function y(t){return e(t).map(function(){return this.toArray()})}function S(e,t,o){var r=H(O(t)),l=H(N(t)),a=e.rowSpan;e.rowSpan=o?r>l?a-(r-l)||1:a+(l-r):r>l?a+(r-l):a-(l-r)||1}function T(t,o,r,l,a,n,i){var s,d,c=H(t),u=H([o]);c>u&&(s=Array(i+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>'),d=n.children(":not(.k-filter-row)"),e(Array(c-u+1).join("<tr>"+s+"</tr>")).insertAfter(d.last())),P(n,c-u),R(r,l,a,n)}function x(t,o,r){var l,a,n,i,s,d,c,u;for(r=r||0,n=o,o=U(o),i={},s=t.find(">tr:not(.k-filter-row)"),d=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},c=0,u=o.length;c<u;c++)l=I(o[c],n),i[l.row]||(i[l.row]=s.eq(l.row).find(".k-header").filter(d)),a=i[l.row].eq(l.cell),a.attr(xe.attr("index"),r+c);return o.length}function H(e){var t,o,r=1,l=0;for(t=0;t<e.length;t++)e[t].columns&&(o=H(e[t].columns),o>l&&(l=o));return r+l}function R(t,o,r,l){var a,n,i=M(t[0],o),s=r.find(">tr:not(.k-filter-row):eq("+i.row+")>th.k-header"),d=e(),c=i.cell;for(a=0;a<t.length;a++)d=d.add(s.eq(c+a));for(l.find(">tr:not(.k-filter-row)").eq(i.row).append(d),n=[],a=0;a<t.length;a++)t[a].columns&&(n=n.concat(t[a].columns));n.length&&R(n,o,r,l)}function I(e,t,o,r){var l,a;for(o=o||0,r=r||{},r[o]=r[o]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:r[o],row:o};break}if(t[a].columns&&(l=I(e,t[a].columns,o+1,r)))break;r[o]++}return l}function z(e,t,o,r){var l,a,n=!!o.locked;do l=e[t],t+=r?1:-1,a=!!l.locked;while(l&&t>-1&&t<e.length&&l!=o&&!l.columns&&a===n);return l}function E(e,t,o,r,l){var a,n,i,s,d;return t.columns?(t=t.columns,t[r?0:t.length-1]):(a=c(t,e),n=a?a.columns:e,i=Ve(t,n),0===i&&r?i++:i!=n.length-1||r?(i>0||0===i&&!r)&&(i+=r?-1:1):i--,s=Ve(o,n),t=z(n,i,o,s>i),d=Ve(t,l),(!t.columns||d&&d!==n.length-1)&&t&&t!=o&&t.columns?E(e,t,o,r,l):null)}function M(e,t,o,r){var l,a;for(o=o||0,r=r||{},r[o]=r[o]||0,a=0;a<t.length;a++){if(t[a]==e){l={cell:r[o],row:o};break}if(t[a].columns&&(l=M(e,t[a].columns,o+1,r)))break;t[a].hidden||r[o]++}return l}function F(e){var t=D(O(e));return t.concat(D(N(e)))}function L(e,t,o,r){var l=e[o],a=e[r],n=c(l,t);return t=n?n.columns:t,Ve(a,t)}function D(e){var t,o=[],r=[];for(t=0;t<e.length;t++)o.push(e[t]),e[t].columns&&(r=r.concat(e[t].columns));return r.length&&(o=o.concat(D(r))),o}function A(e){var t,o,r=0;for(o=0;o<e.length;o++)t=e[o],t.columns?r+=A(t.columns):t.hidden&&r++;return r}function W(e){var t,o,r,l=0;for(o=0,r=e.length;o<r;o++)t=e[o].style.width,t&&t.indexOf("%")==-1&&(l+=parseInt(t,10));return l}function q(e,t){var o,r,l=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(r=0;r<l.length;r++)o=l[r].rowSpan,o>1&&(l[r].rowSpan=o-t||1)}function P(e,t){var o,r=e.find("tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)");for(o=0;o<r.length;o++)r[o].rowSpan+=t}function B(t){var o,r=t.find("tr:not(.k-filter-row)"),l=r.filter(function(){return!e(this).children().length}).remove().length,a=r.find("th:not(.k-group-cell,.k-hierarchy-cell)");for(o=0;o<a.length;o++)a[o].rowSpan>1&&(a[o].rowSpan-=l);return r.length-l}function V(e,t,o,r,l){var a,n,i,s=[];for(a=0,i=e.length;a<i;a++)n=o[r]||[],n.push(t.eq(l+a)),o[r]=n,e[a].columns&&(s=s.concat(e[a].columns));s.length&&V(s,t,o,r+1,l+e.length)}function O(e){return Pe(e,function(e){return e.locked})}function N(e){return Pe(e,function(e){return!e.locked})}function G(e){return Pe(e,function(e){return!e.locked&&_(e)})}function K(e){return Pe(e,function(e){return e.locked&&_(e)})}function j(e){var t,o=[];for(t=0;t<e.length;t++)e[t].hidden||(e[t].columns?o=o.concat(j(e[t].columns)):o.push(e[t]));return o}function U(e){var t,o=[];for(t=0;t<e.length;t++)e[t].columns?o=o.concat(U(e[t].columns)):o.push(e[t]);return o}function $(o){var r,l=o.find(">tr:not(.k-filter-row)"),a=function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")},n=e();return l.length>1&&(n=l.find("th").filter(a).filter(function(){return this.rowSpan>1})),n=n.add(l.last().find("th").filter(a)),r=xe.attr("index"),n.sort(function(o,l){var a,n;return o=e(o),l=e(l),a=o.attr(r),n=l.attr(r),a===t&&(a=e(o).index()),n===t&&(n=e(l).index()),a=parseInt(a,10),n=parseInt(n,10),a>n?1:a<n?-1:0}),n}function Q(t){var o,r,l,a,n,i,s,d=t.closest("table"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u);if(h>0){for(o=p.eq(h-1),r=o.find("th:not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return!e(this).attr("rowspan")}),l=0,a=u.find("th:not(.k-group-cell,.k-hierarchy-cell)").index(t),n=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)").filter(function(){return this.colSpan>1}),i=0;i<n.length;i++)l+=n[i].colSpan||1;for(a+=Math.max(l-1,0),l=0,i=0;i<r.length;i++)if(s=r.eq(i),l+=s.attr("data-colspan")?s[0].getAttribute("data-colspan"):1,a>=i&&a<l){c=Q(s).add(c);break}}return c}function J(t){var o,r,l,a,n,i,s,d=t.closest("thead"),c=e().add(t),u=t.closest("tr"),p=d.find("tr:not(.k-filter-row)"),h=p.index(u)+t[0].rowSpan,f=xe.attr("colspan");if(h<=p.length-1){for(o=u.next(),r=t.prevAll(":not(.k-group-cell,.k-hierarchy-cell)"),r=r.filter(function(){return!this.rowSpan||1===this.rowSpan}),a=0,l=0;l<r.length;l++)a+=parseInt(r.eq(l).attr(f),10)||1;for(n=o.find("th:not(.k-group-cell,.k-hierarchy-cell)"),i=parseInt(t.attr(f),10)||1,l=0;l<i;)o=n.eq(l+a),c=c.add(J(o)),s=parseInt(o.attr(f),10),s>1&&(i-=s-1),l++}return c}function Y(t,o,r,l){var a,n=t;return l&&t.empty(),ze?t[0].innerHTML=r:(a=document.createElement("div"),a.innerHTML="<table><tbody>"+r+"</tbody></table>",t=a.firstChild.firstChild,o[0].replaceChild(t,n[0]),t=e(t)),t}function X(e){e=e||{};var t=e.style;return t?(t=t.replace(/display:[^;]*/i,"display:none"),t.match(/display:/i)||(t=t.replace(/(.*)?/i,"display:none;$1"))):t="display:none",We({},e,{style:t})}function Z(e){e=e||{};var t=e.style;return t&&(e.style=t.replace(/(display\s*:\s*none\s*;?)*/gi,"")),e}function ee(t,o,r,l){var a,n=t.find(">colgroup"),i=qe(o,function(e){return a=e.width,a&&0!==parseInt(a,10)?xe.format('<col style="width:{0}"/>',typeof a===$t?a:a+"px"):"<col />"});(r||n.find(".k-hierarchy-col").length)&&i.splice(0,0,'<col class="k-hierarchy-col" />'),n.length&&n.remove(),n=e(Array(l+1).join('<col class="k-group-col">')+i.join("")),n.is("colgroup")||(n=e("<colgroup/>").append(n)),t.prepend(n),Co.msie&&8==Co.version&&(t.css("display","inline-table"),window.setTimeout(function(){t.css("display","")},1))}function te(e,t){var o,r,l=0,a=e.find("th:not(.k-group-cell)");for(o=0,r=t.length;o<r;o++)t[o].locked&&(a.eq(o).insertBefore(a.eq(l)),a=e.find("th:not(.k-group-cell)"),l++)}function oe(e){var t,o,r,l={};for(o=0,r=e.length;o<r;o++)t=e[o],l[t.value]=t.text;return l}function re(e,t,o,r){var l=o&&o.length&&Ae(o[0])&&"value"in o[0],a=l?oe(o)[e]:e;return a=null!=a?a:"",t?xe.format(t,a):r===!1?a:xe.htmlEncode(a)}function le(e,t,o){for(var r,l=0,a=e[l];a;){if(r=!!o||"none"!==a.style.display,r&&!mo.test(a.className)&&--t<0){a.style.display=o?"":"none";break}a=e[++l]}}function ae(t,o){for(var r,l,a=0,n=t.length;a<n;a+=1)l=t.eq(a),l.is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),r.attr("colspan",parseInt(r.attr("colspan"),10)-1)):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&(r=e(r),r.attr("colspan",parseInt(r.attr("colspan"),10)-1),r.find("col").eq(o).remove(),l=r.find("tr:first")),le(l[0].cells,o,!1))}function ne(e){var t,o,r=[];for(o=0;o<e.length&&(t=e[o],"field"in t&&"value"in t&&"items"in t);o++)r.push(t),t.hasSubgroups&&(r=r.concat(ne(t.items)));return r}function ie(e){var t,o,r=[];for(o=0;o<e.length&&(t=e[o],"field"in t&&"value"in t&&"items"in t);o++)t.hasSubgroups&&(r=r.concat(ie(t.items))),r.push(t.aggregates);return r}function se(t,o){for(var r,l,a,n=0,i=t.length;n<i;n+=1)l=t.eq(n),l.is(".k-grouping-row,.k-detail-row")?(r=l.children(":not(.k-group-cell):first,.k-detail-cell").last(),r.attr("colspan",parseInt(r.attr("colspan"),10)+1)):(l.hasClass("k-grid-edit-row")&&(r=l.children(".k-edit-container")[0])&&(r=e(r),r.attr("colspan",parseInt(r.attr("colspan"),10)+1),ee(r.find(">form>table"),v(a),!1,0),l=r.find("tr:first")),le(l[0].cells,o,!0))}function de(e,t,o){o=o||1;var r,l,a;for(l=0,a=e.length;l<a;l++)r=e.eq(l).children().last(),r.attr("colspan",parseInt(r.attr("colspan"),10)+o),r=t.eq(l).children().last(),r.attr("colspan",parseInt(r.attr("colspan"),10)-o)}function ce(e){var t,o,r=0,l=e.find(">colgroup>col");for(t=0,o=l.length;t<o;t+=1)r+=parseInt(l[t].style.width,10);return r}function ue(e,t){var o,r,l,a;e=e[0],t=t[0],e.rows.length!==t.rows.length&&(o=e.offsetHeight,r=t.offsetHeight,o>r?(l=t.rows[t.rows.length-1],bo.test(l.className)&&(l=t.rows[t.rows.length-2]),a=o-r):(l=e.rows[e.rows.length-1],bo.test(l.className)&&(l=e.rows[e.rows.length-2]),a=r-o),l.style.height=l.offsetHeight+a+"px")}function pe(e,t){var o,r=e.offsetHeight,l=t.offsetHeight;r>l?o=r+"px":r<l&&(o=l+"px"),o&&(e.style.height=t.style.height=o)}function he(e,t){var o,r,l;if(typeof e===$t&&e===t)return e;if(Ae(e)&&e.name===t)return e;if(Be(e))for(o=0,r=e.length;o<r;o++)if(l=e[o],typeof l===$t&&l===t||l.name===t)return l;return null}function fe(t,o){if(o===!0){t=e(t);var r=t.parent().scrollLeft();xe.focusElement(t),t.parent().scrollLeft(r)}else e(t).one("focusin",function(e){e.preventDefault()}).focus()}function ge(e,o){return e.options.groupable&&(o.groupable||o.groupable===t)}function me(t,o){return!!e.grep(t,function(e){return e.field===o}).length}function be(e,t){return!(!e.field||e.selectable)&&(!(t.editable&&!t.editable(e.field))&&!(e.editable&&!e.editable(t)))}function ke(t){return e(t).is(":button,a,:input,a>.k-icon,textarea,span.k-select,span.k-icon,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdown")}function _e(o){var r=e(o.currentTarget),l=r.is("th"),a=this.table.add(this.lockedTable),n=this.thead.parent().add(e(">table",this.lockedHeader)),i=ke(o.target),s=e(o.target).is(".k-checkbox-label, .k-checkbox"),d=e(o.target),c=r.closest("table")[0];return i&&r.find(xe.roleSelector("filtercell")).length?(this._setCurrent(r),t):(c!==a[0]&&c!==a[1]&&c!==n[0]&&c!==n[1]||d.is("a.k-i-expand, a.k-i-collapse")||(this.options.navigatable&&this._setCurrent(r,!1,s),!l&&i||setTimeout(function(){So&&e(xe._activeElement()).hasClass("k-widget")||ke(d[0])&&ke(xe._activeElement())&&e.contains(c,xe._activeElement())||fe(c,!0)}),l&&!xe.support.touch&&o.preventDefault()),t)}function ve(e,t){if(!t)return 0;var o=0;return xe.support.browser.webkit&&(o=e.width()),o}function we(e){return e&&(e.hasClass("k-edit-cell")||e.parent().hasClass("k-grid-edit-row"))}function Ce(e){return'<td colspan="#=data.colspan +'+e+'#"><p class="k-reset"><a class="k-icon k-i-collapse" href="\\#" tabindex="-1" '+po+'="'+co+'"></a>#=data.text#</p></td>'}function ye(e){return'<td colspan="'+e+'"><p class="k-reset">&nbsp;</p></td>'}function Se(e,t,o){return'<tr role="row" class="k-grouping-row">'+r(t)+'<td colspan="'+e+'" aria-expanded="true"><p class="k-reset"><a class="k-icon k-i-collapse" href="#" tabindex="-1" '+po+'="'+co+'"></a>'+o+"</p></td></tr>"}function Te(e){return'<tr role="row" class="k-grouping-row"><td colspan="'+e+'" aria-expanded="true"><p class="k-reset">&nbsp;</p></td></tr>'}var xe=window.kendo,He=xe.ui,Re=xe.data.DataSource,Ie=xe.data.ObservableObject,ze=xe.support.tbodyInnerHtml,Ee=xe._activeElement,Me=He.Widget,Fe=xe._outerWidth,Le=xe._outerHeight,De=xe.keys,Ae=e.isPlainObject,We=e.extend,qe=e.map,Pe=e.grep,Be=e.isArray,Ve=e.inArray,Oe=Array.prototype.push,Ne=e.proxy,Ge=xe.isFunction,Ke=e.isEmptyObject,je=e.contains,Ue=Math,$e="progress",Qe="error",Je="k-hierarchy-cell",Ye=":not(.k-group-cell):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-collapse,.k-icon.k-i-expand))):visible",Xe="tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer) > td:not(.k-group-cell):not(.k-hierarchy-cell)",Ze="tr:not(.k-footer-template):visible",et=":not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible",tt="tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible",ot=tt+":first",rt=tt+":last",lt=Ze+":first>"+et+":first",at="th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)",nt=".kendoGrid",it="k-grid-content-locked",st="k-group-cell",dt="edit",ct="beforeEdit",ut="save",pt="remove",ht="detailInit",ft="filterMenuInit",gt="columnMenuInit",mt="filterMenuOpen",bt="columnMenuOpen",kt="cellClose",_t="change",vt="columnHide",wt="columnShow",Ct="saveChanges",yt="dataBound",St="detailExpand",Tt="detailCollapse",xt="itemchange",Ht="page",Rt="paging",It="scroll",zt="sync",Et="k-state-focused",Mt=":kendoFocusable",Ft="k-state-selected",Lt="k-checkbox",Dt="input[data-role='checkbox']."+Lt,At="k-grid-norecords",Wt="resize",qt="columnResize",Pt="columnReorder",Bt="columnLock",Vt="columnUnlock",Ot="navigate",Nt="click",Gt="mousedown",Kt="height",jt="tabIndex",Ut="function",$t="string",Qt="bottom",Jt="container-for",Yt="field",Xt="input",Zt="incell",eo="inline",to="uid",oo=1,ro="colSpan",lo="group-sort",ao="Are you sure you want to delete this record?",no="No records available.",io="Delete",so="Cancel",co="Collapse",uo="Expand",po="aria-label",ho=/(\}|\#)/gi,fo=/#/gi,go="[\\x20\\t\\r\\n\\f]",mo=RegExp("(^|"+go+")(k-group-cell|k-hierarchy-cell)("+go+"|$)"),bo=RegExp("(^|"+go+")(k-filter-row)("+go+"|$)"),ko='# if (iconClass) {#<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#"><span class="#=iconClass#"></span>#=text#</a># } else { #<a role="button" class="k-button k-button-icontext #=className#" #=attr# href="\\#">#=text#</a># } #',_o='# var checkboxGuid = kendo.guid(); #<input class="'+Lt+'" data-role="checkbox" id="#= checkboxGuid #" aria-label="Select row" aria-checked="false" type="checkbox"><label for="#= checkboxGuid #" class="k-checkbox-label k-no-text">&\\#8203;</label>',vo='# var checkboxGuid = kendo.guid(); #<input class="'+Lt+'" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox" id="#= checkboxGuid #"><label for="#= checkboxGuid #" class="k-checkbox-label k-no-text">##&\\#8203;##</label>',wo=!1,Co=xe.support.browser,yo=Co.msie&&7==Co.version,So=Co.msie&&8==Co.version,To=Co.msie&&11===Co.version,xo=/Mac OS/.test(navigator.userAgent),Ho=Me.extend({init:function(e,t){var o=this;Me.fn.init.call(o,e,t),o._refreshHandler=Ne(o.refresh,o),o.setDataSource(t.dataSource),o.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(_t,t._refreshHandler),t.dataSource=e,t.dataSource.bind(_t,t._refreshHandler),t.dataSource.options.useRanges=!0},options:{name:"VirtualScrollable",itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[Rt,Ht,It],destroy:function(){var e=this;Me.fn.destroy.call(e),e.dataSource.unbind(_t,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(nt),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&(e.drag.destroy(),e.drag=null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t,o=this,r=xe.support.scrollbar()+1,l=o.element;l.css({width:"auto",overflow:"hidden"}).css(wo?"padding-left":"padding-right",r),o.content=l.children().first(),t=o.wrapper=o.content.wrap('<div class="k-virtual-scrollable-wrap"/>').parent().bind("DOMMouseScroll"+nt+" mousewheel"+nt,Ne(o._wheelScroll,o)),o._wrapper(),xe.support.kineticScrollNeeded&&(o.drag=new xe.UserEvents(o.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){o.verticalScrollbar.scrollTop(o.verticalScrollbar.scrollTop()-e.y.delta),t.scrollLeft(t.scrollLeft()-e.x.delta),e.preventDefault()}})),o.verticalScrollbar=e('<div class="k-scrollbar k-scrollbar-vertical" />').css({width:r}).appendTo(l).bind("scroll"+nt,Ne(o._scroll,o))},_wrapper:function(){var e=this;To&&(e.wrapper.css({"overflow-y":It}),e.element.css(wo?"padding-left":"padding-right",0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,o=t.scrollTop(),r=xe.wheelDeltaY(e);!r||r>0&&0===o||r<0&&o+t[0].clientHeight==t[0].scrollHeight||(e.preventDefault(),this.verticalScrollbar.scrollTop(o+-r))}},_scroll:function(e){var o=this,r=!o.options.prefetch,l=e.currentTarget.scrollTop,a=o.dataSource,n=o.itemHeight,i=a.skip()||0,s=o._rangeStart||i,d=o.element.innerHeight(),c=!!(o._scrollbarTop&&o._scrollbarTop>l),u=Ue.max(Ue.floor(l/n),0),p=c?Ue.ceil(d/n):Ue.floor(d/n),h=Ue.max(u+p,0);return o._preventScroll?(o._preventScroll=!1,t):(o._scrollTop=l-s*n,o._scrollbarTop=l,o._scrolling=r,o._fetch(u,h,c)||(o.wrapper[0].scrollTop=o._scrollTop),o.trigger(It),r&&(o._scrollingTimeout&&clearTimeout(o._scrollingTimeout),o._scrollingTimeout=setTimeout(function(){o._scrolling=!1,o._page(o._rangeStart,o.dataSource.take())},100)),t)},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,o=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&o||e._isScrolledToBottom())&&(t.scrollTop(o+xe.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&(e._isWrapperScrolledToBottom()||(t.scrollTop(o-xe.support.scrollbar()),e._scrollTop=t.scrollTop()),e._wrapperScrolled=!1)},_scrollTo:function(e){var t=this,o=t.verticalScrollbar;o.scrollTop()!==e&&(t._preventScroll=!0),t.wrapper.scrollTop(e),t._scrollTop=t.wrapper.scrollTop(),o.scrollTop(e),t._scrollbarTop=o.scrollTop()},_isScrolledToTop:function(){return 0===this.verticalScrollbar.scrollTop()},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){var t=this._rangeStart||this.dataSource.skip()||0;return t+e},_isElementVisible:function(e){return this._isElementVisibleInWrapper(e)},_isElementVisibleInWrapper:function(t){var o,r,l=this,a=l.wrapper;return t=e(t),!!(t[0]&&je(a[0],t[0])&&(o=t.offset().top-a.offset().top,r=t.outerHeight()/2,(o>=0||Ue.abs(o)<=r)&&Ue.floor(o+r)<=a.height()))},position:function(e){var t,o=this._rangeStart||this.dataSource.skip()||0,r=this.dataSource.pageSize();return t=e>o?e-o+1:o-e-1,t>r?r:t},scrollIntoView:function(e){var t=this.wrapper[0],o=t.clientHeight,r=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,l=e[0].offsetTop,a=e[0].offsetHeight;r>l?this.verticalScrollbar[0].scrollTop-=o/2:l+a>=r+o&&(this.verticalScrollbar[0].scrollTop+=o/2)},_fetch:function(t,o,r){var l=this,a=l.dataSource,n=l.itemHeight,i=a.take(),s=l._rangeStart||a.skip()||0,d=Ue.floor(t/i)*i,c=!1,u=.33,p=l.verticalScrollbar,h=Co.webkit?1:0;return t<s?(c=!0,s=Ue.max(0,o-i),l._scrollTop=p.scrollTop()-s*n,l._page(s,i)):o>=s+i&&!r?(c=!0,s=Ue.min(t,a.total()-i),l._scrollTop=p.scrollTop()>=p[0].scrollHeight-p.height()-h?l.wrapper[0].scrollHeight-l.wrapper.height():n,l._page(s,i)):!l._fetching&&l.options.prefetch&&(t<d+i-i*u&&t>i&&a.prefetch(d-i,i,e.noop),o>d+i*u&&a.prefetch(d+i,i,e.noop)),c},fetching:function(){return this._fetching},_page:function(t,o,r){var l=this,a=!l.options.prefetch,n=l.dataSource;r=Ge(r)?r:e.noop,l.trigger(Rt,{skip:t,take:o})||(clearTimeout(l._timeout),l._fetching=!0,l._rangeStart=t,n.inRange(t,o)?(xe.ui.progress(e(l.wrapper).parent(),!0),n.range(t,o,function(){xe.ui.progress(e(l.wrapper).parent(),!1),r(),l.trigger(Ht)})):(a||xe.ui.progress(l.wrapper.parent(),!0),l._timeout=setTimeout(function(){l._scrolling||(a&&xe.ui.progress(l.wrapper.parent(),!0),n.range(t,o,function(){xe.ui.progress(l.wrapper.parent(),!1),r(),l.trigger(Ht)}))},100)))},repaintScrollbar:function(e){var o,r=this,l="",a=r.options.maxScrollHeight,n=r.dataSource,i=xe.support.kineticScrollNeeded?0:xe.support.scrollbar(),s=r.wrapper[0],d=r._isScrolledToBottom(),c=r.itemHeight=r.options.itemHeight()||0,u=s.scrollWidth>s.offsetWidth?i:0,p=n.total()*c+u;for(o=0;o<Ue.floor(p/a);o++)l+='<div style="width:1px;height:'+a+'px"></div>';p%a&&(l+='<div style="width:1px;height:'+p%a+'px"></div>'),r.verticalScrollbar.html(l),d&&!r._isScrolledToBottom()&&r.scrollToBottom(),t!==r._scrollTop&&e&&(s.scrollTop=r._scrollTop,r._scrollWrapperOnColumnResize())},refresh:function(e){var o=this,r=o.dataSource,l=o._rangeStart,a=(e||{}).action,n=o._isScrolledToBottom()||!a||a!==xt&&a!==pt&&a!==zt;xe.ui.progress(o.wrapper.parent(),!1),clearTimeout(o._timeout),o.repaintScrollbar(n),o.drag&&o.drag.cancel(),t===l||o._fetching||((!a||a!==zt&&a!==xt)&&(o._rangeStart=r.skip()),1!==r.page()||a&&(a===zt||a===xt)||(o.verticalScrollbar[0].scrollTop=0)),o._fetching=!1}}),Ro={create:{text:"Add new record",className:"k-grid-add",iconClass:"k-icon k-i-plus"},cancel:{text:"Cancel changes",className:"k-grid-cancel-changes",iconClass:"k-icon k-i-cancel"},save:{text:"Save changes",className:"k-grid-save-changes",iconClass:"k-icon k-i-check"},destroy:{text:"Delete",className:"k-grid-delete",iconClass:"k-icon k-i-close"},edit:{text:"Edit",className:"k-grid-edit",iconClass:"k-icon k-i-edit"},update:{text:"Update",className:"k-primary k-grid-update",iconClass:"k-icon k-i-check"},canceledit:{text:"Cancel",className:"k-grid-cancel",iconClass:"k-icon k-i-cancel"},excel:{text:"Export to Excel",className:"k-grid-excel",iconClass:"k-icon k-i-file-excel"},pdf:{text:"Export to PDF",className:"k-grid-pdf",iconClass:"k-icon k-i-file-pdf"}},Io=xe.ui.DataBoundWidget.extend({init:function(t,o,r){var l=this;o=Be(o)?{dataSource:o}:o,Me.fn.init.call(l,t,o),r&&(l._events=r),wo=xe.support.isRtl(t),l._element(),l._aria(),l._columns(e.extend(!0,[],l.options.columns)),l._dataSource(),l._tbody(),l._pageable(),l._thead(),l._groupable(),l._toolbar(),l._setContentHeight(),l._templates(),l._navigatable(),l._selectable(),l._clipboard(),l._details(),l._editable(),l._attachCustomCommandsEvent(),l._adaptiveColumns(),l._minScreenSupport(),l.options.autoBind?l.dataSource.fetch():(l._group=l._groups()>0,l._footer()),l.lockedContent&&(l.wrapper.addClass("k-grid-lockedcolumns"),l._resizeHandler=function(){l.resize()},e(window).on("resize"+nt,l._resizeHandler)),xe.notify(l)},events:[_t,"dataBinding","cancel",yt,St,Tt,ht,ft,mt,gt,bt,dt,ct,ut,pt,Ct,kt,qt,Pt,wt,vt,Bt,Vt,Ot,"page","sort","filter","group","groupExpand","groupCollapse"],setDataSource:function(e){var t,o=this,r=o.options.scrollable;o.options.dataSource=e,o._dataSource(),o._pageable(),o._thead(),r&&(r.virtual?(t=o.content.find(">.k-virtual-scrollable-wrap"),t.scrollLeft(ve(t,wo))):(t=o.tbody,o.content.scrollLeft(ve(t,wo)))),o.options.groupable&&o._groupable(),o.virtualScrollable&&o.virtualScrollable.setDataSource(o.options.dataSource),o.options.navigatable&&o._navigatable(),o.options.selectable&&o._selectable(),o.options.autoBind&&o.dataSource.fetch()},options:{name:"Grid",columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,groupable:!1,rowTemplate:"",altRowTemplate:"",noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,columnResizeHandleWidth:3,mobile:"",messages:{editable:{cancelDelete:so,confirmation:ao,confirmDelete:io},commands:{create:Ro.create.text,cancel:Ro.cancel.text,save:Ro.save.text,destroy:Ro.destroy.text,edit:Ro.edit.text,update:Ro.update.text,canceledit:Ro.canceledit.text,excel:Ro.excel.text,pdf:Ro.pdf.text},noRecords:no,expandCollapseColumnHeader:"",groupHeader:"Press ctrl + space to group",ungroupHeader:"Press ctrl + space to ungroup"}},destroy:function(){var t,o=this;o._angularItems("cleanup"),o._destroyColumnAttachments(),Me.fn.destroy.call(o),this._navigatableTables&&(this._navigatableTables.off(nt),this._navigatableTables=null),o._resizeHandler&&e(window).off("resize"+nt,o._resizeHandler),o.pager&&o.pager.element&&o.pager.destroy(),o.timer&&clearTimeout(o.timer),o._progressTimeOut&&clearTimeout(o._progressTimeOut),o._collapseGroupsTimeOut&&clearTimeout(o._collapseGroupsTimeOut),o._endlessFetchTimeOut&&clearTimeout(o._endlessFetchTimeOut),o.pager=null,o._destroyGroupable(),o.options.reorderable&&o.wrapper.data("kendoReorderable").destroy(),o.selectable&&o.selectable.element&&(o.selectable.destroy(),o.clearArea(),o._selectedIds=null,o.copyHandler&&(o.wrapper.off("keydown",o.copyHandler),o.unbind(o.copyHandler)),o.updateClipBoardState&&(o.unbind(o.updateClipBoardState),o.updateClipBoardState=null),o.clearAreaHandler&&o.wrapper.off("keyup",o.clearAreaHandler)),o.selectable=null,o.resizable&&(o.resizable.destroy(),o._resizeUserEvents&&(o._resizeHandleDocumentClickHandler&&e(document).off("click",o._resizeHandleDocumentClickHandler),o._resizeUserEvents.destroy(),o._resizeUserEvents=null),o.resizable=null),o._destroyVirtualScrollable(),o._destroyEditable(),o.dataSource&&(o.dataSource.unbind(_t,o._refreshHandler).unbind($e,o._progressHandler).unbind(Qe,o._errorHandler),o._refreshHandler=o._progressHandler=o._errorHandler=null),t=o.element.add(o.wrapper).add(o.table).add(o.thead).add(o.wrapper.find(">.k-grid-toolbar")),o.content&&(t=t.add(o.content).add(o.content.find(">.k-virtual-scrollable-wrap"))),o.lockedHeader&&o._removeLockedContainers(),o.pane&&o.pane.destroy(),o.minScreenResizeHandler&&e(window).off("resize",o.minScreenResizeHandler),o._detachColumnMediaResizeHandler(),o._draggableInstance&&o._draggableInstance.element&&o._draggableInstance.destroy(),o._draggableInstance=null,t.off(nt),xe.destroy(o.wrapper),o.rowTemplate=o.altRowTemplate=o.lockedRowTemplate=o.lockedAltRowTemplate=o.detailTemplate=o.footerTemplate=o.groupFooterTemplate=o.lockedGroupFooterTemplate=o.noRecordsTemplate=null,o.scrollables=o.thead=o.tbody=o.element=o.table=o.content=o.footer=o.wrapper=o.lockedTable=o.lockedContent=o.lockedHeader=o.lockedFooter=o._groupableClickHandler=o._groupRows=o._setContentWidthHandler=null},getOptions:function(){var o,r,l,a=this.options;return a.dataSource=null,o=We(!0,{},this.options),o.columns=xe.deepExtend([],this.columns),r=this.dataSource,l=r.options.data&&r._data,r.options.data=null,o.dataSource=e.extend(!0,{},r.options),r.options.data=l,o.dataSource.data=l,o.dataSource.page=r.page(),o.dataSource.filter=r.filter(),o.dataSource.pageSize=r.pageSize(),o.dataSource.sort=r.sort(),o.dataSource.group=r.group(),o.dataSource.aggregate=r.aggregate(),o.dataSource.transport&&(o.dataSource.transport.dataSource=null),o.pageable&&o.pageable.pageSize&&(o.pageable.pageSize=r.pageSize()),o.$angular=t,o},setOptions:function(e){var t,o,r,l,a=this.getOptions();xe.deepExtend(a,e),e.dataSource||(a.dataSource=this.dataSource),t=this.wrapper,o=this._events,
r=this.element,this.destroy(),this.options=null,this._isMobile&&(l=t.closest(xe.roleSelector("pane")).parent(),l.after(t),l.remove(),t.removeClass("k-grid-mobile")),t[0]!==r[0]&&(t.before(r),t.remove()),r.empty(),this.init(r,a,o),this._setEvents(a)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children("tbody"))):this._items(this.tbody)},_items:function(t){return t.children().filter(function(){var t=e(this);return!t.hasClass("k-grouping-row")&&!t.hasClass("k-detail-row")&&!t.hasClass("k-group-footer")})},dataItems:function(){var e,t,o,r=xe.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(e=r.length,t=Array(2*e),o=e;--o>=0;)t[o]=t[o+e]=r[o];r=t}return r},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&(this.angular("cleanup",function(){return{elements:t.thead.get()}}),t.thead.add(t.lockedHeader).find("th").each(function(){var t=e(this),o=t.data("kendoFilterMenu"),r=t.data("kendoColumnSorter"),l=t.data("kendoColumnMenu");o&&o.destroy(),r&&r.destroy(),l&&l.destroy()}))},_attachCustomCommandsEvent:function(){var e,t,o,r=this,l=U(r.columns||[]);for(t=0,o=l.length;t<o;t++)e=l[t].command,e&&s(r,r.wrapper,e)},_aria:function(){var e=this.element.attr("id")||"aria";e&&(this._cellId=e+"_active_cell")},_element:function(){var t=this,o=t.element;o.is("table")||(o=t.options.scrollable?t.element.find("> .k-grid-content > table"):t.element.children("table"),o.length||(o=e("<table />").appendTo(t.element))),yo&&o.attr("cellspacing",0),t.table=o.attr("role",t._hasDetails()?"treegrid":"grid"),t._wrapper()},_createResizeHandle:function(t,o){var r,l,a,n,i,s,d,c,u=this,p=u.options.columnResizeHandleWidth,h=u.options.scrollable,f=u.resizeHandle,g=this._groups();if(f&&u.lockedContent&&f.data("th")[0]!==o[0]&&(f.off(nt).remove(),f=null),f||(f=u.resizeHandle=e('<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>'),t.append(f)),wo)r=o.offset().left-parseFloat(o.css("marginLeft"))-(t.offset().left+parseFloat(t.css("borderLeftWidth"))),h&&(i=o.closest(".k-grid-header-wrap, .k-grid-header-locked"),s=Co.msie?i.scrollLeft():0,d=Co.webkit?i[0].scrollWidth-i[0].offsetWidth-i.scrollLeft():0,c=Co.mozilla?i[0].scrollWidth-i[0].offsetWidth-(i[0].scrollWidth-i[0].offsetWidth-i.scrollLeft()):0,r-=d-c+s);else{for(r=o[0].offsetWidth,a=$(o.closest("thead")).filter(":visible"),n=0;n<a.length&&a[n]!=o[0];n++)r+=a[n].offsetWidth;g>0&&(r+=Fe(t.find(".k-group-cell:first"))*g),u._hasDetails()&&(r+=Fe(t.find(".k-hierarchy-cell:first")))}l=o.offset().top-parseFloat(o.css("marginTop"))-(t.offset().top+parseFloat(t.css("borderTopWidth"))),f.css({top:l,left:r-p,height:Le(o),width:3*p}).data("th",o).show(),f.off("dblclick"+nt).on("dblclick"+nt,function(){u._autoFitLeafColumn(o.data("index"))})},_positionColumnResizeHandle:function(){var o=this,r=o.lockedHeader?o.lockedHeader.find("thead:first"):e();o.thead.add(r).on("mousemove"+nt,"tr:not(.k-filter-row) > th",function(r){var l=t!==r.buttons?r.buttons:r.which||r.button,a=e(this);a.hasClass("k-group-cell")||a.hasClass("k-hierarchy-cell")||t!==l&&0!==l||a[0].hasAttribute(xe.attr(ro))||o._createResizeHandle(a.closest("div"),a)})},_resizeHandleDocumentClick:function(t){e(t.target).closest(".k-column-active").length||(e(document).off(t),this._hideResizeHandle())},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data("th").removeClass("k-column-active"),this.lockedContent&&!this._isMobile?(this.resizeHandle.off(nt).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,o=t.lockedHeader?t.lockedHeader.find("thead:first"):e();t._resizeUserEvents=new xe.UserEvents(o.add(t.thead),{filter:"th:not(.k-group-cell):not(.k-hierarchy-cell)",threshold:10,hold:function(o){var r=e(o.target);o.preventDefault(),r.addClass("k-column-active"),t._createResizeHandle(r.closest("div"),r),t._resizeHandleDocumentClickHandler||(t._resizeHandleDocumentClickHandler=Ne(t._resizeHandleDocumentClick,t)),e(document).on("click",t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(o,r){var l,a,n,i,s=this,d=!!o.locked,c=!!o.hidden,u=this.options,p=xe.support.mobileOS?0:xe.support.scrollbar(),h=d?Ve(o,K(s.columns)):Ve(o,G(s.columns)),f=d?s.lockedTable:s.table,g=s.footer||e(),m=d?s.lockedHeader.find("table"):s.thead.closest("table"),b=o.minResizableWidth||10,k=Fe(d?f.find("tbody"):s.tbody);return c?(o.width=r>b?r:b,t):(s.footer&&s.lockedContent&&(g=s.footer.children(d?".k-grid-footer-locked":".k-grid-footer-wrap")),l=u.scrollable?m.find("col:not(.k-group-col,.k-hierarchy-col):eq("+h+")").add(f.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")")).add(g.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")")):f.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+h+")"),u.scrollable?(a=!1,n=s.wrapper.width()-p,i=r=r>b?r:b,d&&k-r+i>n&&(i=r+(n-k-2*p),i<0&&(i=r),a=!0),i>10&&i>=b&&(l.css("width",i),k&&(i=a?n-2*p:k+(r-o.width),f.add(m).add(g).css("width",i),d||(s._footerWidth=i))),s._scrollVirtualWrapperOnColumnResize()):r>10&&r>=b&&l.css("width",r),o.width=r,s._applyLockedContainersWidth(),s._syncLockedContentHeight(),s._syncLockedHeaderHeight(),t)},_resizable:function(){var t,o,r,l,n,i,s,d,c=this,u=c.options,p=this._isMobile,h=xe.support.mobileOS?0:xe.support.scrollbar();u.resizable&&(t=u.scrollable?c.wrapper.find(".k-grid-header-wrap:first"):c.wrapper,p?c._positionColumnResizeHandleTouch(t):c._positionColumnResizeHandle(t),c.resizable&&c.resizable.destroy(),c.resizable=new He.Resizable(t.add(c.lockedHeader),{handle:(u.scrollable?"":">")+".k-resize-handle",hint:function(t){return e('<div class="k-grid-resize-indicator" />').css({height:Le(t.data("th"))+c.tbody.attr("clientHeight")})},start:function(t){var h,f,g,m,b;d=e(t.currentTarget).data("th"),p&&c._hideResizeHandle(),h=d.closest("table"),f=e.inArray(d[0],$(d.closest("thead")).filter(":visible")),i=h.parent().hasClass("k-grid-header-locked"),g=i?c.lockedTable:c.table,m=c.footer||e(),c.footer&&c.lockedContent&&(m=c.footer.children(i?".k-grid-footer-locked":".k-grid-footer-wrap")),a(c.wrapper,"col-resize"),s=u.scrollable?h.find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")").add(g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")).add(m.find("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")")):g.children("colgroup").find("col:not(.k-group-col):not(.k-hierarchy-col):eq("+f+")"),b=e.map(c.columns,function(e){return!e.hidden&&(i&&e.locked||!i&&!e.locked)?e:null}),o=t.x.location,r=Fe(d),l=U(b)[f].minResizableWidth||10,n=Fe(i?g.children("tbody"):c.tbody),Co.webkit&&c.wrapper.addClass("k-grid-column-resizing")},resize:function(t){var a,p,f,g,m,b,k=wo?-1:1,_=r+t.x.location*k-o*k;u.scrollable?(i&&c.lockedFooter?a=c.lockedFooter.children("table"):c.footer&&(a=c.footer.find(">.k-grid-footer-wrap>table")),a&&a[0]||(a=e()),p=d.closest("table"),f=i?c.lockedTable:c.table,g=!1,m=c.wrapper.width()-h,b=_,i&&n-r+b>m&&(b=r+(m-n-2*h),b<0&&(b=_),g=!0),b>10&&b>=l&&(s.css("width",b),n&&(b=g?m-2*h:n+t.x.location*k-o*k,f.add(p).add(a).css("width",b),i||(c._footerWidth=b))),c._scrollVirtualWrapperOnColumnResize()):_>10&&_>=l&&s.css("width",_)},resizeend:function(){var e,t,o,l=Fe(d);a(c.wrapper,""),Co.webkit&&c.wrapper.removeClass("k-grid-column-resizing"),r!=l&&(t=c.lockedHeader?c.lockedHeader.find("thead:first tr:first").add(c.thead.find("tr:first")):d.parent(),o=d.attr(xe.attr("index")),o||(o=t.find("th:not(.k-group-cell):not(.k-hierarchy-cell)").index(d)),e=U(c.columns)[o],e.width=l,c.trigger(qt,{column:e,oldWidth:r,newWidth:l}),c._applyLockedContainersWidth(),c._syncLockedContentHeight(),c._syncLockedHeaderHeight()),c._hideResizeHandle(),d=null}}))},_draggable:function(){var t,o=this;o.options.reorderable&&(o._draggableInstance&&o._draggableInstance.destroy(),t=o.wrapper.children(".k-grid-header"),o._draggableInstance=o.wrapper.kendoDraggable({group:xe.guid(),autoScroll:!0,filter:o.content?".k-grid-header:first "+at:"table:first>.k-grid-header "+at,dragstart:function(){t.children(".k-grid-header-wrap").unbind("scroll"+nt+"scrolling").bind("scroll"+nt+"scrolling",function(e){o.virtualScrollable?o.content.find(">.k-virtual-scrollable-wrap").scrollLeft(this.scrollLeft):o.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft)})},dragend:function(){t.children(".k-grid-header-wrap").unbind("scroll"+nt+"scrolling")},drag:function(){o._hideResizeHandle()},hint:function(t){var o=t.attr(xe.attr("title"));return o&&(o=xe.htmlEncode(o)),e('<div class="k-header k-reorder-clue k-drag-clue" />').html(o||t.attr(xe.attr("field"))||t.text()).prepend('<span class="k-icon k-drag-status k-i-cancel" />')}}).data("kendoDraggable"))},_reorderable:function(){var t=this;t.options.reorderable&&(t.wrapper.data("kendoReorderable")&&t.wrapper.data("kendoReorderable").destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dragOverContainers:function(e,o){var r=F(t.columns);return r[e].lockable!==!1&&L(r,t.columns,e,o)>-1},inSameContainer:function(o){return e(o.source).parent()[0]===e(o.target).parent()[0]&&L(F(t.columns),t.columns,o.sourceIndex,o.targetIndex)>-1},change:function(e){var o=F(t.columns),r=o[e.oldIndex],l=L(o,t.columns,e.oldIndex,e.newIndex);t.trigger(Pt,{newIndex:l,oldIndex:Ve(r,o),column:r}),t.reorderColumn(l,r,"before"===e.position)}}))},_reorderHeader:function(e,t,o){var r,l,a,s,d=this,c=I(e[0],d.columns),u=I(t,d.columns),p=[];for(r=0;r<e.length;r++)e[r].columns&&(p=p.concat(e[r].columns));l=i(d.lockedHeader,d.thead,"tr:eq("+c.row+")>th.k-header:not(.k-group-cell,.k-hierarchy-cell)"),a=O(e).length,s=O([t]).length,p.length?(a>0&&0===s?T(e,t,p,d.columns,d.lockedHeader.find("thead"),d.thead,this._groups()):0===a&&s>0&&T(e,t,p,N(d.columns),d.thead,d.lockedHeader.find("thead"),this._groups()),(t.columns||c.cell-u.cell>1||u.cell-c.cell>1)&&(t=E(d.columns,t,e[0],o,d.columns),t&&d._reorderHeader(p,t,o))):a!==s&&S(l[c.cell],d.columns,a),n(l,c.cell,u.cell,o,e.length)},_reorderContent:function(t,o,r){var l,a,s,d,c,u,p=this,h=e(),f=t[0],g=v(t),m=Ve(f,U(p.columns)),b=Ve(o,U(p.columns)),k=Ve(g[0],j(p.columns)),_=Ve(o,j(p.columns)),w=O(p.columns).length,C=!!o.locked,y=p.footer||p.wrapper.find(".k-grid-footer"),S=l=_;for(o.hidden&&(s=C?O(p.columns):N(p.columns),v(s).length>0?(S=l=_=this._findClosestVisibleColumnIndex(s,b),a=v(s.slice(b)).length>0):C?(_=p.lockedTable.find("colgroup"),S=p.lockedHeader.find("colgroup"),l=e(p.lockedFooter).find(">table>colgroup")):(_=p.tbody.prev(),S=p.thead.prev(),l=y.find(".k-grid-footer-wrap").find(">table>colgroup"))),p._hasFilterRow()&&n(p.wrapper.find(".k-filter-row th:not(.k-group-cell,.k-hierarchy-cell)"),m,b,r,t.length),k>=0&&n(i(p.lockedHeader,p.thead.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),k,S,a?a:r,g.length),p.options.scrollable&&k>=0&&n(i(p.lockedTable,p.tbody.prev(),"col:not(.k-group-col,.k-hierarchy-col)"),k,_,a?a:r,g.length),y&&y.length&&(k>=0&&n(i(p.lockedFooter,y.find(".k-grid-footer-wrap"),">table>colgroup>col:not(.k-group-col,.k-hierarchy-col)"),k,l,a?a:r,g.length),n(y.find(".k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)"),m,b,r,t.length)),d=p.tbody.children(":not(.k-grouping-row,.k-detail-row)"),p.lockedTable&&(w>b?w<=m&&de(p.lockedTable.find(">tbody>tr.k-grouping-row"),p.table.find(">tbody>tr.k-grouping-row"),t.length):w>m&&de(p.table.find(">tbody>tr.k-grouping-row"),p.lockedTable.find(">tbody>tr.k-grouping-row"),t.length),h=p.lockedTable.find(">tbody>tr:not(.k-grouping-row,.k-detail-row)")),c=0,u=d.length;c<u;c+=1)n(i(h[c],d[c],">td:not(.k-group-cell,.k-hierarchy-cell)"),m,b,r,t.length)},_findClosestVisibleColumnIndex:function(e,t){var o=v(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse(),r=v(o)[0];return Ve(r,v(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(U(this.columns)[e])},autoFitColumn:function(t){var o,r,l,a,n,i,s,d,c,u,p,h,f,g,m,k,v,w,C,y,S=this,T=S.options,x=S.columns,H=S.lockedHeader?$(S.lockedHeader.find(">table>thead")).filter(b).length:0,R="col:not(.k-group-col):not(.k-hierarchy-col)",I="td:visible:not(.k-group-cell):not(.k-hierarchy-cell)";if(t="number"==typeof t?x[t]:Ae(t)?Pe(D(x),function(e){return e===t})[0]:Pe(D(x),function(e){return e.field===t})[0],t&&_(t)){for(i=t.minResizableWidth,o=Ve(t,U(x)),a=t.locked,l=a?S.lockedHeader.children("table"):S.thead.parent(),r=l.find("[data-index='"+o+"']"),c=a?S.lockedTable:S.table,u=S.footer||e(),S.footer&&S.lockedContent&&(u=S.footer.children(a?".k-grid-footer-locked":".k-grid-footer-wrap")),p=u.find("table").first(),S.lockedHeader&&!a&&(o-=H),h=0;h<x.length&&x[h]!==t;h++)x[h].hidden&&o--;if(T.scrollable?(n=l.find(R).eq(o).add(c.children("colgroup").find(R).eq(o)).add(p.find("colgroup").find(R).eq(o)),a||(s=c.parent(),d=s.scrollLeft())):n=c.children("colgroup").find(R).eq(o),f=l.add(c).add(p),g=Fe(r),n.width(""),f.css("table-layout","fixed"),n.width("auto"),f.addClass("k-autofitting"),f.css("table-layout",""),m=Math.ceil(Math.max(Fe(r),Fe(c.find("tr:not(.k-grouping-row)").eq(0).children(I).eq(o)),Fe(p.find("tr").eq(0).children(I).eq(o))))+1,i&&i>m&&(m=i),n.width(m),t.width=m,T.scrollable){for(k=l.find("col"),w=0,C=0,y=k.length;C<y;C+=1)if(v=k[C].style.width,v&&v.indexOf("%")==-1)w+=parseInt(v,10);else{if(!k.eq(C).hasClass("k-group-col")){w=0;break}w+=parseInt(k.eq(C).width(),10)}w&&f.each(function(){this.style.width=w+"px"})}Co.msie&&8==Co.version&&(f.css("display","inline-table"),setTimeout(function(){f.css("display","table")},1)),f.removeClass("k-autofitting"),d&&s.scrollLeft(d),S.trigger(qt,{column:t,oldWidth:g,newWidth:m}),S._applyLockedContainersWidth(),S._syncLockedContentHeight(),S._syncLockedHeaderHeight()}},reorderColumn:function(e,o,r){var l,a,n=this,i=c(o,n.columns),s=i?i.columns:n.columns,d=Ve(o,s),u=s[e],p=!!u.locked,h=O(n.columns).length,f=Pe(U(n.columns),function(e){return e.groupHeaderColumnTemplate});d!==e&&(!o.locked&&p&&1==N(n.columns).length||o.locked&&!p&&1==h||(n._hideResizeHandle(),r===t&&(r=e<d),a=[o],n._reorderHeader(a,u,r),n.lockedHeader&&(B(n.thead),B(n.lockedHeader)),u.columns&&(u=U(u.columns),u=u[r?0:u.length-1]),o.columns&&(a=U(o.columns)),n._reorderContent(a,u,r),l=!!o.locked,l=l!=p,o.locked=p,s.splice(r?e:e+1,0,o),s.splice(d<e?d:d+1,1),n._updateLockedCols(),n._updateCols(),n._templates(),n._updateColumnCellIndex(),n._updateColumnSorters(),f.length>0&&n._renderGroupRows(),n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedHeaderHeight(),n._syncLockedContentHeight(),n._updateFirstColumnClass(),l&&(p?n.trigger(Bt,{column:o}):n.trigger(Vt,{column:o}))))},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find("thead"),t=x(e,O(this.columns))),x(this.thead,N(this.columns),t)},lockColumn:function(e){var t,o=this.columns;e="number"==typeof e?o[e]:Pe(o,function(t){return t.field===e})[0],!e||e.locked||e.hidden||(t=O(o).length-1,this.reorderColumn(t,e,!1))},unlockColumn:function(e){var t,o=this.columns;e="number"==typeof e?o[e]:Pe(o,function(t){return t.field===e})[0],e&&e.locked&&!e.hidden&&(t=O(o).length,this.reorderColumn(t,e,!0))},cellIndex:function(t){var o=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(o=U(O(this.columns)).length),e(t).parent().children("td:not(.k-group-cell,.k-hierarchy-cell)").index(t)+o},_modelForContainer:function(t){t=e(t),t.is("tr")||"popup"===this._editMode()||(t=t.closest("tr"));var o=t.attr(xe.attr("uid"));return this.dataSource.getByUid(o)},_editable:function(){var t,o=this,r=o.selectable&&o.selectable.options.multiple,l=o.options.editable,a=function(){var t=Ee(),r=o._editContainer;r&&r[0]&&!e.contains(r[0],t)&&r[0]!==t&&!e(t).closest(".k-animation-container").length&&(o.editable.end()?o.closeCell():o._scrollVirtualWrapper())};l&&(this.wrapper.addClass("k-editable"),t=o._editMode(),"incell"===t?(o.table.add(o.lockedTable).on("mousedown"+nt,Ze+">"+et,function(t){var r=e(t.target);"incell"===o._editMode()&&r.hasClass("k-checkbox-label")&&r.prev().attr(xe.attr("bind"))&&t.preventDefault()}),l.update!==!1&&(xo&&o.wrapper.on(Nt+nt,".k-edit-cell > input[type='checkbox']",function(t){e(t.target).focus()}).on(Nt+nt,".k-edit-cell",function(t){e(t.target).is("input")||e(t.currentTarget).find("input[type='checkbox']").focus()}).on(Gt+nt,"tr:not(.k-grouping-row) > td",function(t){var r=o._editContainer;o._mousedownOnEditCell=!(!r||!r[0]||!e.contains(r[0],t.target)&&r[0]!==t.target)}),o.wrapper.on(Nt+nt,"tr:not(.k-grouping-row) > td",function(t){var l=e(this),a=o.lockedTable&&l.closest("table")[0]===o.lockedTable[0];o._mousedownOnEditCell=!1,l.hasClass("k-hierarchy-cell")||l.hasClass("k-detail-cell")||l.hasClass("k-group-cell")||l.hasClass("k-edit-cell")||l.has("a.k-grid-delete").length||l.has("button.k-grid-delete").length||l.closest("tbody")[0]!==o.tbody[0]&&!a||e(t.target).is(":input")||(o.editable?o.editable.end()?(r&&e(Ee()).blur(),o.closeCell(),o.editCell(l)):o._scrollVirtualWrapper():o.editCell(l))}).on("focusin"+nt,function(){e.contains(this,Ee())||(clearTimeout(o.timer),o.timer=null)}).on("focusout"+nt,function(e){var t=!0;xo&&o._mousedownOnEditCell&&(t=!1),o._mousedownOnEditCell=!1,t&&(o.timer=setTimeout(function(){a(e)},1))}))):l.update!==!1&&(o.wrapper.on(Nt+nt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible a.k-grid-edit",function(t){t.preventDefault(),o.editRow(e(this).closest("tr"))}),o._isVirtualInlineEditable()&&o.wrapper.on("focusout"+nt,"tr:not(.k-grouping-row) > td",function(){o.editable&&!o.editable.end()&&o._scrollVirtualWrapper()})),l.destroy!==!1?o.wrapper.on(Nt+nt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-delete",function(t){t.preventDefault(),t.stopPropagation(),o.removeRow(e(this).closest("tr"))}):o.wrapper.on(Nt+nt,"tbody>tr:not(.k-detail-row,.k-grouping-row):visible button.k-grid-delete",function(e){e.stopPropagation(),o._confirmation()||e.preventDefault()}))},editCell:function(t){var o,r,l,a;if(t=e(t),o=this,r=U(o.columns)[o.cellIndex(t)],l=o._modelForContainer(t),o.closeCell(),l&&be(r,l)&&!r.command){if(o.trigger(ct,{model:l}))return;o._attachModelChange(l),o._editContainer=t,o._shouldClearEditableState&&o._clearEditableState(),o.editable=t.addClass("k-edit-cell").kendoEditable({fields:{field:r.field,format:r.format,editor:r.editor,values:r.values},model:l,target:o,change:function(e){o.trigger(ut,{values:e.values,container:t,model:l})&&e.preventDefault()},skipFocus:!(!o._isVirtualIncellEditable()||!o._editableState)}).data("kendoEditable"),a=t.parent().addClass("k-grid-edit-row"),o.lockedContent&&pe(a[0],o._relatedRow(a).addClass("k-grid-edit-row")[0]),o.trigger(dt,{container:t,model:l})}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),o=e[0].offsetWidth>t[0].clientWidth?xe.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-o)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){var e,t;this.lockedHeader&&(e=this.lockedHeader.children("table"),t=this.thead.parent(),this._adjustRowsHeight(e,t),ue(e,t))},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children("table"),this.footer.find(".k-grid-footer-wrap > table"))},_destroyEditable:function(){var e=this,t=function(){if(e.editable){var t=e.editView?e.editView.element:e._editContainer;t&&(t.off(Nt+nt,"a.k-grid-cancel",e._editCancelClickHandler),t.off(Nt+nt,"a.k-grid-update",e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&("popup"!==e._editMode()||e._isMobile?t():e._editableIsClosing?e._editContainer.data("kendoWindow").bind("deactivate",t):(e._editableIsClosing=!0,e._editContainer.data("kendoWindow").bind("deactivate",t).close())),e._actionSheet&&(e._actionSheet.destroy(),e._actionSheet=null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(""))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind("change",t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,o=e._modelForContainer(t);o&&o.unbind(_t,e._modelChangeHandler)},closeCell:function(e){var t,o,r,l=this,a=l._editContainer;a&&(r=l._modelForContainer(a),e&&l.trigger("cancel",{container:a,model:r})||(l.trigger(kt,{type:e?"cancel":"save",model:r,container:a}),a.removeClass("k-edit-cell"),t=U(l.columns)[l.cellIndex(a)],o=a.parent().removeClass("k-grid-edit-row"),l.lockedContent&&l._relatedRow(o).removeClass("k-grid-edit-row"),l._destroyEditable(),l._displayCell(a,t,r),l._shouldClearEditableState&&l._clearEditableState(),l.trigger("itemChange",{item:o,data:r,ns:He}),l.lockedContent&&pe(o.css("height","")[0],l._relatedRow(o).css("height","")[0])))},_displayCell:function(e,t,o){var r=this,l={storage:{},count:0},a=We({},xe.Template,r.options.templateSettings),n=xe.template(r._cellTmpl(t,l),a);l.count>0&&(n=Ne(n,l.storage)),e.empty().html(n(o)),r.angular("compile",function(){return{elements:e,data:[{dataItem:o}]}})},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(t){var o,r,l,a,n=this,i=n._editMode();"incell"!==i&&n.cancelRow(),t=e(t),n.lockedContent&&(t=t.add(n._relatedRow(t))),t=t.hide(),o=n._modelForContainer(t),o&&!n.trigger(pt,{row:t,model:o})?(a=n.dataSource.options.schema,n._selectedIds&&a&&a.model&&(r=Ge(n.dataSource.options.schema.model)?n.dataSource.options.schema.model.fn.idField:n.dataSource.options.schema.model.id,l=o[r],delete n._selectedIds[l]),n.dataSource.remove(o),"inline"!==i&&"popup"!==i||n.dataSource.sync()):"incell"===i&&n._destroyEditable()},_editMode:function(){var e="incell",t=this.options.editable;return t!==!0&&(e="string"==typeof t?t:t.mode||e),e},editRow:function(t){var o,r,l,a=this;t instanceof Ie?o=t:(t=e(t),o=a._modelForContainer(t)),r=a._editMode(),a.cancelRow(),o&&(t=a.tbody.children("["+xe.attr("uid")+"="+o.uid+"]"),a._attachModelChange(o),"popup"===r?a._createPopupEditor(o):"inline"===r?a._createInlineEditor(t,o):"incell"===r&&e(t).children(Ye).each(function(){var t=e(this),r=U(a.columns)[a.cellIndex(t)];if(o=a._modelForContainer(t),o&&(!o.editable||o.editable(r.field))&&r.field&&!r.selectable)return a.editCell(t),!1}),l=a.editView?a.editView.element:a._editContainer,l&&(this._editCancelClickHandler||(this._editCancelClickHandler=Ne(this._editCancelClick,this)),l.on(Nt+nt,"a.k-grid-cancel",this._editCancelClickHandler),this._editUpdateClickHandler||(this._editUpdateClickHandler=Ne(this._editUpdateClick,this)),l.on(Nt+nt,"a.k-grid-update",this._editUpdateClickHandler)))},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation(),this.saveRow()},_editCancelClick:function(t){var o,r=this,l=r.options.navigatable,a=r.editable.options.model,n=r.editView?r.editView.element:r._editContainer;t.preventDefault(),t.stopPropagation(),r.trigger("cancel",{container:n,model:a})||(o=r.items().index(e(r.current()).parent()),r.cancelRow(),l&&(r._setCurrent(r.items().eq(o).children().filter(et).first()),fe(r.table,!0)))},_createPopupEditor:function(o){var r,l,a,n,i,s,d,c,u,p,h,f,g,m=this,b="<div "+xe.attr("uid")+'="'+o.uid+'" class="k-popup-edit-form'+(m._isMobile?" k-mobile-list":"")+'"><div class="k-edit-form-container">',k=[],_=U(m.columns),v=m.options.editable,w=v.template,C=Ae(v)?v.window:{},y=We({},xe.Template,m.options.templateSettings);if(!m.trigger(ct,{model:o})){if(C=C||{},w)for(typeof w===$t&&(w=window.unescape(w)),b+=xe.template(w,y)(o),a=0,n=_.length;a<n;a++)r=_[a],r.command&&(p=he(r.command,"edit"),p&&(l=p));else for(a=0,n=_.length;a<n;a++)r=_[a],r.selectable||(r.command?r.command&&(p=he(r.command,"edit"),p&&(l=p)):(b+='<div class="k-edit-label"><label for="'+r.field+'">'+(r.title||r.field||"")+"</label></div>",be(r,o)?(k.push({field:r.field,format:r.format,editor:r.editor,values:r.values}),b+="<div "+xe.attr("container-for")+'="'+r.field+'" class="k-edit-field"></div>'):(f={storage:{},count:0},i=xe.template(m._cellTmpl(r,f),y),f.count>0&&(i=Ne(i,f.storage)),b+='<div class="k-edit-field">'+i(o)+"</div>")));l&&Ae(l)&&(Ae(l.text)&&(s=l.text.update,d=l.text.cancel),Ae(l.iconClass)&&(c=l.iconClass.update,u=l.iconClass.cancel),l.attr&&(h=l.attr)),m._isMobile?(b+="</div></div>",m.editView=m.pane.append("<div data-"+xe.ns+'role="view" data-'+xe.ns+'use-native-scrolling="true" data-'+xe.ns+'init-widgets="false" class="k-grid-edit-form"><div data-'+xe.ns+'role="header" class="k-header">'+m._createButton({name:"update",text:s,attr:h})+(C.title||"Edit")+m._createButton({name:"canceledit",text:d,attr:h})+"</div>"+b+"</div>"),g=m._editContainer=m.editView.element.find(".k-popup-edit-form")):(b+='<div class="k-edit-buttons k-state-default">',b+=m._createButton({name:"update",text:s,attr:h,iconClass:c})+m._createButton({name:"canceledit",text:d,attr:h,iconClass:u}),b+="</div></div></div>",g=m._editContainer=e(b).appendTo(m.wrapper).eq(0).kendoWindow(We({modal:!0,resizable:!1,draggable:!0,title:m.options.messages.commands.edit||"Edit",visible:!1,close:function(r){if(r.userTriggered){if(r.sender.element.focus(),m.trigger("cancel",{container:g,model:o}))return r.preventDefault(),t;var l=m.items().index(e(m.current()).parent());m._editableIsClosing=!0,m.cancelRow(),m.options.navigatable&&(m._setCurrent(m.items().eq(l).children().filter(et).first()),fe(m.table,!0))}}},C))),m.editable=m._editContainer.kendoEditable({fields:k,model:o,clearContainer:!1,target:m}).data("kendoEditable"),m._isMobile&&g.find("input[type=checkbox],input[type=radio]").parent(".k-edit-field").addClass("k-check").prev(".k-edit-label").addClass("k-check").click(function(){e(this).next().children("input").click()}),m._openPopUpEditor(),m.trigger(dt,{container:g,model:o})}},_openPopUpEditor:function(){var e=this,t=e._editContainer?e._editContainer.data("kendoWindow"):null,o=(e.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):t&&(o.position||t.center(),t.open())},_createInlineEditor:function(t,o){var r,l,a,n=this,i=[];n.trigger(ct,{model:o})||(n.lockedContent&&(t=t.add(n._relatedRow(t))),t.children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){if(l=e(this),r=U(n.columns)[n.cellIndex(l)],!r.command&&be(r,o))i.push({field:r.field,format:r.format,editor:r.editor,values:r.values}),l.attr(xe.attr("container-for"),r.field),l.empty();else if(r.command&&(a=he(r.command,"edit"))){l.empty();var t,s,d,c,u;Ae(a)&&(Ae(a.text)&&(t=a.text.update,s=a.text.cancel),Ae(a.iconClass)&&(d=a.iconClass.update,c=a.iconClass.cancel),a.attr&&(u=a.attr)),e(n._createButton({name:"update",text:t,attr:u,iconClass:d})+n._createButton({name:"canceledit",text:s,attr:u,iconClass:c})).appendTo(l)}}),n._editContainer=t,n._editContainer.addClass("k-grid-edit-row"),n._shouldClearEditableState&&n._clearEditableState(),n.editable=new xe.ui.Editable(n._editContainer,{target:n,fields:i,model:o,skipFocus:!!(n._isVirtualInlineEditable()&&n._editableState&&n._editableState.field),clearContainer:!1}),t.length>1&&(pe(t[0],t[1]),n._applyLockedContainersWidth()),n.trigger(dt,{container:t,model:o}))},cancelRow:function(e){var t,o=this,r=o._editContainer;if(r){if(t=o._modelForContainer(r),!t||e&&o.trigger("cancel",{container:r,model:t}))return;o._destroyEditable(),o.dataSource.cancelChanges(t),o._clearEditableState(),o._displayRow("popup"!==o._editMode()?r:o.tbody.find("["+xe.attr("uid")+"="+t.uid+"]"))}},saveRow:function(){var t,o=this,r=this._editContainer,l=this._modelForContainer(r),a=e.Deferred();return r&&this.editable?(t=o.editable&&o.editable.end(),!t||this.trigger(ut,{container:r,model:l})?(t||o._scrollVirtualWrapper(),a.reject().promise()):(o._clearEditableState(),this.dataSource.sync())):a.resolve().promise()},_displayRow:function(t){var o,r,l,a,n,i=this,s=i._modelForContainer(t),d=t.hasClass("k-state-selected"),c=t.hasClass("k-alt");s&&(i.lockedContent&&(o=e((c?i.lockedAltRowTemplate:i.lockedRowTemplate)(s)),i._relatedRow(t.last()).replaceWith(o)),i.angular("cleanup",function(){return{elements:t.get()}}),r=e((c?i.altRowTemplate:i.rowTemplate)(s)),t.is(":visible")||r.hide(),t.replaceWith(r),i.trigger("itemChange",{item:r,data:s,ns:He}),o&&o.length&&i.trigger("itemChange",{item:o,data:s,ns:He}),a=r,n=[{dataItem:s}],o&&o.length&&(a=r.add(o),n.push({dataItem:s})),i.angular("compile",function(){return{elements:a.get(),data:n}}),d&&(i.options.selectable||i._checkBoxSelection)&&i.select(r.add(o)),o&&pe(r[0],o[0]),l=r.next(),l.hasClass("k-detail-row")&&l.is(":visible")&&r.find(".k-hierarchy-cell .k-icon").removeClass("k-i-expand").addClass("k-i-collapse"))},_showMessage:function(t,o){var r,l,a,n=this;return n._isMobile?(r=xe.template('<ul><li class="km-actionsheet-title">#:title#</li><li><a href="\\#" class="k-button k-grid-delete">#:confirmDelete#</a></li></ul>'),l=e(r(t)).appendTo(n.view.element),a=n._actionSheet=new xe.mobile.ui.ActionSheet(l,{cancel:t.cancelDelete,cancelTemplate:'<li class="km-actionsheet-cancel"><a class="k-button" href="\\#">#:cancel#</a></li>',close:function(){this.destroy()},command:function(t){var r=e(t.currentTarget).parent();r.hasClass("km-actionsheet-cancel")||n._removeRow(o)},popup:n._actionSheetPopupOptions}),a.open(o),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,o=t.options.editable,r=o===!0||typeof o===$t?t.options.messages.editable.confirmation:o.confirmation;return Ae(o)&&typeof o.mode===$t&&typeof r!==Ut&&typeof r!==$t&&r!==!1&&(r=t.options.messages.editable.confirmation),r===!1||null==r||(typeof r===Ut&&(r=r(t._modelForContainer(e))),t._showMessage({confirmDelete:o.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:o.cancelDelete||t.options.messages.editable.cancelDelete,title:r===!0?t.options.messages.editable.confirmation:r},e))},cancelChanges:function(){var e=this;e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop(function(){e.virtualScrollable.scrollToTop()})},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();!t&&e.editable||e.trigger(Ct)?t||e._scrollVirtualWrapper():e.dataSource.sync()},addRow:function(){var e,t,o=this,r=o.dataSource,l=o._editMode(),a=o.options.editable.createAt||"",n=r.pageSize(),i=r.view()||[],s=a.toLowerCase()===Qt,d=o._isVirtualEditable();o.editable&&o.editable.end()||!o.editable?("incell"!=l&&o.cancelRow(),e=r.indexOf(i[0]),s&&(e+=i.length,n&&!r.options.serverPaging&&n<=i.length&&(e-=1)),e<0&&(e=r.page()>r.totalPages()?(r.page()-1)*n:0),o.options.navigatable&&"incell"==l&&o._removeCurrent(),d?o._virtualAddRow():(t=r.insert(e,{}),o._editModel(t))):o._scrollVirtualWrapper()},_editModel:function(e){var t,o,r,l,a=this,n=a.options.editable.createAt||"",i=a._editMode();e&&(t=e.uid,o=a.lockedContent?a.lockedTable:a.table,r=o.find("tr["+xe.attr("uid")+"="+t+"]"),l=r.children("td:not(.k-group-cell,.k-hierarchy-cell)").eq(a._firstEditableColumnIndex(r)),"inline"===i&&r.length?a.editRow(r):"popup"===i?a.editRow(e):l.length&&a.editCell(l),"bottom"==n.toLowerCase()&&a.lockedContent&&(a.lockedContent[0].scrollTop=a.content[0].scrollTop=a.table[0].offsetHeight))},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||"").toLowerCase()===Qt;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e,t=this,o=t.dataSource,r=t.virtualScrollable;1===o.page()?(e=o.insert(0,{}),t._editModel(e),r.scrollToTop()):t._virtualPageToTop(function(){e=o.insert(0,{}),t._editModel(e),r.scrollToTop()})},_virtualAddRowAtBottom:function(){var e,t=this,o=t.dataSource,r=t.virtualScrollable,l=o.total();o.at(l-1)instanceof Ie?(e=o.insert(l,{}),t._virtualPageToBottom(function(){t._editModel(e),r.scrollToBottom()})):t._virtualPageToBottom(function(){e=o.insert(l,{}),t._editModel(e),r.scrollToBottom();
})},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),function(){e()})},_virtualPageToBottom:function(e){var t=this,o=t.dataSource,r=o.take(),l=o.total(),a=l>r?l-r:0;t._virtualPage(a,r,function(){e()})},_virtualPage:function(e,t,o){var r=this;r._isVirtualEditable()&&(r.virtualScrollable._preventScroll=!0,r.virtualScrollable._page(e,t,o))},_firstEditableColumnIndex:function(e){var t,o,r,l=this,a=U(l.columns),n=l._modelForContainer(e);for(o=0,r=a.length;o<r;o++)if(t=a[o],n&&(!n.editable||n.editable(t.field))&&!t.command&&t.field&&t.hidden!==!0)return o;return-1},_toolbar:function(){var t,o=this,r=o.wrapper,l=o.options.toolbar,a=o.options.editable;l&&(t=o.wrapper.find(".k-grid-toolbar"),t.length||(Ge(l)||(l=typeof l===$t?l:o._toolbarTmpl(l).replace(fo,"\\#"),l=Ne(xe.template(l),o)),t=e('<div class="k-header k-grid-toolbar" />').html(l({})).prependTo(r),o.angular("compile",function(){return{elements:t.get()}})),a&&a.create!==!1&&t.on(Nt+nt,".k-grid-add",function(e){e.preventDefault(),o.addRow()}).on(Nt+nt,".k-grid-cancel-changes",function(e){e.preventDefault(),o.cancelChanges()}).on(Nt+nt,".k-grid-save-changes",function(e){e.preventDefault(),o.saveChanges()}),t.on(Nt+nt,".k-grid-excel",function(e){e.preventDefault(),o.saveAsExcel()}),t.on(Nt+nt,".k-grid-pdf",function(e){e.preventDefault(),o.saveAsPDF()}))},_toolbarTmpl:function(e){var t,o,r=this,l="";if(Be(e))for(t=0,o=e.length;t<o;t++)l+=r._createButton(e[t]);return l},_createButton:function(e){var o,r=e.template||ko,a=typeof e===$t?e:e.name||e.text,n=Ro[a]?Ro[a].className:"k-grid-"+(a||"").replace(/\s/g,""),i={className:n,text:a,attr:"",iconClass:""},s=this.options.messages.commands;if(!(a||Ae(e)&&e.template))throw Error("Custom commands should have name specified");return Ae(e)?(e=We(!0,{},e),e.className&&Ve(i.className,e.className.split(" "))<0?e.className+=" "+i.className:e.className===t&&(e.className=i.className),"edit"===a&&(e=We(!0,{},e),e.text=Ae(e.text)?e.text.edit:e.text,e.iconClass=Ae(e.iconClass)?e.iconClass.edit:e.iconClass),e.attr&&(Ae(e.attr)&&(e.attr=l(e.attr)),typeof e.attr===$t&&(o=e.attr.match(/class="(.+?)"/),o&&Ve(o[1],e.className.split(" "))<0&&(e.className+=" "+o[1]))),i=We(!0,i,Ro[a],{text:s[a]},e)):i=We(!0,i,Ro[a],{text:s[a]}),xe.template(r)(i)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(".k-grid-footer").length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(Nt+nt,t._groupableClickHandler):t._groupableClickHandler=function(o){var r=e(this),l=r.closest("tr"),a=t._groupRows?t._groupRows[t.wrapper.find(".k-grouping-row").index(l)]:{};r.hasClass("k-i-collapse")?t.trigger("groupCollapse",{group:a,element:l})||t.collapseGroup(l):t.trigger("groupExpand",{group:a,element:l})||t.expandGroup(l),o.preventDefault(),o.stopPropagation()},t._isLocked()?t.lockedTable.on(Nt+nt,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler):t.table.on(Nt+nt,".k-grouping-row .k-i-expand, .k-grouping-row .k-i-collapse",t._groupableClickHandler),t._attachGroupable()},_attachGroupable:function(){var t=this,o=t.wrapper,r=t.options.groupable,l=at+"["+xe.attr("field")+"]",a=t.content?".k-grid-header:first "+l:"table:first>.k-grid-header "+l;r&&r.enabled!==!1&&(o.has("div.k-grouping-header")[0]||e("<div>&nbsp;</div>").addClass("k-grouping-header").prependTo(o),t.groupable&&t._destroyGroupable(),t.groupable=new He.Groupable(o,We({},r,{draggable:t._draggableInstance,groupContainer:">div.k-grouping-header",dataSource:t.dataSource,draggableElements:a,filter:a,allowDrag:t.options.reorderable,change:function(e){t.trigger("group",{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&(t.dataSource.options.endless=null,t._endlessPageSize=t.dataSource.options.pageSize,t.dataSource._skip=0,t.dataSource._pageSize=t.dataSource._take=t._endlessPageSize,t.dataSource._page=1))}})),t._addGroupableOptionsToHeader())},_addGroupableOptionsToHeader:function(){var e,t,o,r=this,l=D(r.columns),a={},n="",i=r._headerCells(),s="";for(o=0;o<l.length;o++)n=l[o].field,a[l[o].field]=l[o];for(o=0;o<i.length;o++)e=i.eq(o),s=e.attr(xe.attr(Yt)),t=a[s],t&&t.groupable&&t.groupable.sort&&e.data(lo,t.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable("destroy"),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){var e,t=this,o=t._headerCells();for(e=0;e<o.length;e++)o.eq(e).removeData(lo)},_continuousItems:function(t,o){var r,l,a,n,i,s,d,c;if(this.lockedContent){for(r=this,l=r.table.add(r.lockedTable),a=e(t,l[0]),n=e(t,l[1]),i=o?O(r.columns).length:1,s=o?r.columns.length-i:1,d=[],c=0;c<a.length;c+=i)Oe.apply(d,a.slice(c,c+i)),Oe.apply(d,n.splice(0,s));return d}},_selectable:function(){var o,r,l,a,n=this,i=[],s=n._isLocked(),d=n.options.selectable;d&&(n.selectable&&n.selectable.destroy(),n._selectedIds={},d=xe.ui.Selectable.parseOptions(d),o=d.multiple,r=d.cell,n._hasDetails()&&(i[i.length]=".k-detail-row"),(n.options.groupable||n._hasFooters()||n._groups())&&(i[i.length]=".k-grouping-row,.k-group-footer"),i=i.join(","),""!==i&&(i=":not("+i+")"),l=n.table,s&&(l=l.add(n.lockedTable)),a=">"+(r?Xe:"tbody>tr"+i),n.selectable=new xe.ui.Selectable(l,{filter:a,aria:!0,multiple:o,change:function(){var e;r||n._persistSelectedRows(),n._checkBoxSelection&&(e=n.selectable.value(),n._uncheckCheckBoxes(),n._checkRows(e),n._toggleHeaderCheckState(e===n.items().length?!0:!1)),n.trigger(_t)},useAllItems:s&&o&&r,relatedTarget:function(t){var o,l,a,i;if(!r&&s){for(l=e(),a=0,i=t.length;a<i;a++)o=n._relatedRow(t[a]),Ve(o[0],t)<0&&(l=l.add(o));return l}},continuousItems:function(){return n._continuousItems(a,r)}}),n.options.navigatable&&l.on("keydown"+nt,function(a){var i=n.current(),d=a.target;if(a.keyCode===De.SPACEBAR&&!a.shiftKey&&e.inArray(d,l)>-1&&!i.is(".k-edit-cell,.k-header")&&i.parent().is(":not(.k-grouping-row,.k-detail-row,.k-group-footer)")){if(a.preventDefault(),a.stopPropagation(),i=r?i:i.parent(),s&&!r&&(i=i.add(n._relatedRow(i))),o)if(a.ctrlKey){if(i.hasClass(Ft))return n._deselectCheckRows(i),t}else n.selectable.clear();else n.selectable.clear();r||(n.selectable._lastActive=i),n.selectable.value(i)}else!r&&(e(d).is("td")||e(d).is("table")&&Ve(d,this._navigatableTables))&&(a.shiftKey&&a.keyCode==De.LEFT||a.shiftKey&&a.keyCode==De.RIGHT||a.shiftKey&&a.keyCode==De.UP||a.shiftKey&&a.keyCode==De.DOWN||a.keyCode===De.SPACEBAR&&a.shiftKey)&&(a.preventDefault(),a.stopPropagation(),i=i.parent(),s&&(i=i.add(n._relatedRow(i))),o?(n.selectable._lastActive||(n.selectable._lastActive=i),n.selectable.selectRange(n.selectable._firstSelectee(),i)):(n.selectable.clear(),n.selectable.value(i)))}))},_clipboard:function(){var e,t=this.options,o=t.selectable;o&&t.allowCopy&&(e=this,t.navigatable||e.table.add(e.lockedTable).attr("tabindex",0).on("mousedown"+nt+" keydown"+nt,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on("mousedown"+nt,Ze+">"+et,Ne(_e,e)),e.copyHandler=Ne(e.copySelection,e),e.updateClipBoardState=function(){e.areaClipBoard&&e.areaClipBoard.val(e.getTSV()).focus().select()},e.bind("change",e.updateClipBoardState),e.wrapper.on("keydown",e.copyHandler),e.clearAreaHandler=Ne(e.clearArea,e),e.wrapper.on("keyup",e.clearAreaHandler))},copySelection:function(t){t instanceof jQuery.Event&&!t.ctrlKey&&!t.metaKey||e(t.target).is("input:visible,textarea:visible")||window.getSelection&&""+window.getSelection()||document.selection&&document.selection.createRange().text||(this.areaClipBoard||(this.areaClipBoard=e("<textarea />").css({position:"fixed",top:"50%",left:"50%",opacity:0,width:0,height:0}).appendTo(this.wrapper)),this.areaClipBoard.val(this.getTSV()).focus().select())},getTSV:function(){var t,o,r,l,a,n,i=this,s=i.select(),d="\t",c=i.options.allowCopy,u=!0;return e.isPlainObject(c)&&c.delimeter&&(d=c.delimeter),t="",s.length&&(s.eq(0).is("tr")&&(s=s.find("td:not(.k-group-cell)")),u&&s.filter(":visible"),o=[],r=this.columns.length,l=i._isLocked()&&O(i.columns).length,a=!0,e.each(s,function(t,n){var s,d,c,p;n=e(n),s=n.closest("tr"),d=s.index(),c=n.index(),u&&(c-=n.prevAll(":hidden").length),l&&a&&(a=e.contains(i.lockedTable[0],n[0])),i._groups()&&a&&(c-=i._groups()),c=a?c:c+l,r>c&&(r=c),p=n.text(),o[d]||(o[d]=[]),o[d][c]=p}),n=o.length,o=e.each(o,function(e,t){t&&(o[e]=t.slice(r),n>e&&(n=e))}),e.each(o.slice(n),function(e,o){t+=o?o.join(d)+"\r\n":"\r\n"})),t},clearArea:function(t){var o;this.areaClipBoard&&t&&t.target===this.areaClipBoard[0]&&(o=this.options.navigatable?e(this.current()).closest("table"):this.table,fe(o,!0)),this.areaClipBoard&&(this.areaClipBoard.remove(),this.areaClipBoard=null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return w(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=Ne(t._onColumnMediaResize,t),e(window).on(Wt+nt,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var t=this;t._columnMediaResizeHandler&&e(window).off(Wt+nt,t._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){var t,o=e||[];for(t=0;t<o.length;t++)this._setColumnMediaVisibility(o[t])},_setColumnMediaVisibility:function(e){var t=this;C(e.media)?t._setColumnsMediaVisibility(e.columns):m(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),g(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),g(e)},_setContentMediaWidth:function(){var t,o,r,l,a,n,i,s,d,c,u,p,h,f,g,m=this,_=m.options,v=m._isLocked();if(_.scrollable&&_.resizable&&(v&&m.lockedFooter?t=m.lockedFooter.children("table"):m.footer&&(t=m.footer.find(">.k-grid-footer-wrap>table")),t&&t[0]||(t=e()),o=v?m.wrapper.find(".k-grid-header-locked").find("table"):m.wrapper.find(".k-grid-header").find("table"),r=v?m.lockedTable:m.table,l=o.find("th"),a=o.find("colgroup"),n=l.length,i=l.filter(b).length,s=l.length-i,d=0,""!==o[0].style.width&&parseFloat(o[0].style.width)!==d)){for(c=o.css("width"),u=0;u<n;u++)k(l[u])&&(h=Math.max(u,u-s),f=a.children()[h],g=f?f.style.width:"",""!==g?p=parseFloat(g):(o.css("width","auto"),p=Fe(l.eq(u)),o.css("width",c)),d+=p);r.css("width",d-1),o.css("width",d),t.css("width",d)}},_minScreenSupport:function(){var t=this.hideMinScreenCols();t&&(this.minScreenResizeHandler=Ne(this.hideMinScreenCols,this),e(window).on("resize",this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,o){var r,l,a,n=!1;for(r=0;r<e.length;r++)l=e[r],a=l.minScreenWidth,a!==t&&null!==a&&(n=!0,a>o?this.hideColumn(l):this.showColumn(l)),!l.hidden&&l.columns&&(n=this._iterateMinScreenCols(l.columns,o)||n);return n},_relatedRow:function(t){var o,r,l=this.lockedTable;return t=e(t),l?(o=t.closest(this.table.add(this.lockedTable)),r=o.find(">tbody>tr").index(t),o=o[0]===this.table[0]?l:this.table,o.find(">tbody>tr").eq(r)):t},_relatedCell:function(t){var o,r,l=this.lockedTable;return t=e(t),l?(o=t.closest(this.table.add(this.lockedTable)),r=o.find(">tbody>tr>td").index(t),o=o[0]===this.table[0]?l:this.table,o.find(">tbody>tr>td").index(r)):t},clearSelection:function(){var e=this;return e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection?(e._deselectCheckRows(e.select()),t):(e.options.persistSelection?e._persistSelectedRows():e._selectedIds={},e.trigger(_t),t)},select:function(e){var o=this,r=o.selectable,l=xe.ui.Selectable.parseOptions(this.options.selectable),a=l.cell;return e=o.table.add(o.lockedTable).find(e),e.length?(r&&!r.options.multiple&&(r.clear(),e=e.first()),o._isLocked()&&(e=e.add(e.map(function(){return a?o._relatedCell(this):o._relatedRow(this)}))),r&&!o._checkBoxSelection?r.value(e):(o._checkRows(e),o.select().length===o.items().length&&o._toggleHeaderCheckState(!0),a||o._persistSelectedRows(),o.trigger(_t)),t):r?r.value():o.items().filter("."+Ft)},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find("tr "+Dt).prop("checked",!0).attr("aria-checked",!0).attr("aria-label","Deselect all rows"):t.thead.add(t.lockedHeader).find("tr "+Dt).prop("checked",!1).attr("aria-checked",!1).attr("aria-label","Select all rows")},_uncheckCheckBoxes:function(){var e=this,t=e.table.add(e.lockedTable);t.find("tbody "+Dt).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")},_deselectCheckRows:function(t){var o=this;t=o.table.add(o.lockedTable).find(t),o._isLocked()&&(t=t.add(t.map(function(){return o._relatedRow(this)}))),t.each(function(){e(this).removeClass(Ft).find(Dt).attr("aria-checked",!1).prop("checked",!1).attr("aria-label","Select row")}),o._toggleHeaderCheckState(!1),o._persistSelectedRows(),o.trigger(_t)},_checkRows:function(t){t.each(function(){e(this).addClass(Ft).find(Dt).prop("checked",!0).attr("aria-label","Deselect row").attr("aria-checked",!0)})},_persistSelectedRows:function(){var e,t,o,r,l=this,a=l.items(),n=l.dataSource.options,i=n.schema,s={};if(i&&i.model&&l._data&&(o=Ge(i.model)?i.model.fn.idField:i.model.id))for(l.select().each(function(){t=l.dataItem(this),s[t[o]]=!0}),r=0;r<a.length;r++)t=l.dataItem(a[r]),e=t[o],s[e]?l._selectedIds[e]=!0:delete l._selectedIds[e]},selectedKeyNames:function(){var e,t=this,o=[];for(e in t._selectedIds)o.push(e);return o.sort(),o},_updateCurrentAttr:function(t,o){var r=e(t).data("headerId");e(t).removeClass(Et).closest("table").removeAttr("aria-activedescendant"),r?(r=r.replace(this._cellId,""),e(t).attr("id",r)):e(t).removeAttr("id"),o.data("headerId",o.attr("id")).attr("id",this._cellId).addClass(Et).closest("table").attr("aria-activedescendant",this._cellId),this._current=o},_scrollCurrent:function(){var t,o,r,l,a,n,i=this._current,s=this.options.scrollable;i&&s&&(t=i.parent(),o=t.closest("table").parent(),r=o.is(".k-grid-content-locked,.k-grid-header-locked"),l=o.is(".k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap"),a=e(this.content).find(">.k-virtual-scrollable-wrap").addBack().last()[0],l&&(s.virtual?(n=Math.max(Ve(t[0],this._items(t.parent())),0),this._rowVirtualIndex=this.virtualScrollable.itemIndex(n),this.virtualScrollable.scrollIntoView(t)):this._scrollTo(this._relatedRow(t)[0],a)),this.lockedContent&&(this.lockedContent[0].scrollTop=a.scrollTop),r||this._scrollTo(i[0],a))},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,o,r){var l=this._current;return t=e(t),t.length&&(l&&l[0]===t[0]||(this._updateCurrentAttr(l,t),r||this._scrollCurrent(),o||this.trigger(Ot,{element:t}))),t&&t.length&&(this._lastCellIndex=t.parent().children(Ye).index(t)),this._current},_removeCurrent:function(){this._current&&(this._current.removeClass(Et),this._current=null)},_scrollTo:function(t,o){var r,l=t.tagName.toLowerCase(),a="td"===l||"th"===l,n=t[a?"offsetLeft":"offsetTop"],i=t[a?"offsetWidth":"offsetHeight"],s=o[a?"scrollLeft":"scrollTop"],d=o[a?"clientWidth":"clientHeight"],c=n+i,u=0,p=0,h=0;wo&&a&&(r=e(t).closest("table")[0],Co.msie?p=r.offsetLeft:Co.mozilla&&(h=r.offsetLeft-xe.support.scrollbar())),s=Math.abs(s+p-h),u=s>n?n:c>s+d?i<=d?c-d:n:s,u=Math.abs(u+p)+h,o[a?"scrollLeft":"scrollTop"]=u},_navigatable:function(){var t,o,r,l=this;l.options.navigatable&&(t=l.table.add(l.lockedTable),o=l.thead.parent().add(e(">table",l.lockedHeader)),r=t,l.options.scrollable&&(r=r.add(o),o.attr(jt,-1)),this._navigatableTables=r,r.off("mousedown"+nt+" focus"+nt+" focusout"+nt+" keydown"+nt),o.on("keydown"+nt,Ne(l._openHeaderMenu,l)).find("a.k-link").attr("tabIndex",-1),t.attr(jt,Ue.max(t.attr(jt)||0,0)).on("keydown"+nt,".k-detail-cell",function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),r.on(xe.support.touch?"touchstart"+nt:"mousedown"+nt,Ze+">"+et,Ne(_e,l)).on("focus"+nt,Ne(l._tableFocus,l)).on("focusout"+nt,Ne(l._tableBlur,l)).on("keydown"+nt,Ne(l._tableKeyDown,l)))},_openHeaderMenu:function(e){e.altKey&&e.keyCode==De.DOWN&&(this.current().find(".k-grid-filter, .k-header-column-menu").click(),e.stopImmediatePropagation())},_setTabIndex:function(e){this._navigatableTables.attr(jt,-1),e.attr(jt,0)},_tableFocus:function(t){var o=this.current(),r=e(t.currentTarget);o&&o.is(":visible")?o.addClass(Et):this._setCurrent(r.find(lt)),this._setTabIndex(r)},_tableBlur:function(){var e=this.current();e&&e.removeClass(Et)},_tableKeyDown:function(o){var r,l=this.current(),a=this.virtualScrollable&&this.virtualScrollable.fetching(),n=e(o.target),i=!o.isDefaultPrevented()&&!n.is(":button,a,:input,a>.k-icon");return a?(o.preventDefault(),t):(l=l?l:e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(lt),l.length&&(r=!1,i&&o.keyCode==De.UP&&(r=this._moveUp(l,o.shiftKey)),i&&o.keyCode==De.DOWN&&(r=this._moveDown(l,o.shiftKey)),i&&o.keyCode==(wo?De.LEFT:De.RIGHT)&&(r=this._moveRight(l,o.altKey,o.shiftKey,o.ctrlKey,o.currentTarget)),i&&o.keyCode==(wo?De.RIGHT:De.LEFT)&&(r=this._moveLeft(l,o.altKey,o.shiftKey,o.ctrlKey,o.currentTarget)),i&&o.keyCode==De.PAGEDOWN&&(r=this._handlePageDown()),i&&o.keyCode==De.PAGEUP&&(r=this._handlePageUp()),i&&o.keyCode==De.HOME&&(r=this._handleHome(l,o.ctrlKey)),i&&o.keyCode==De.END&&(r=this._handleEnd(l,o.ctrlKey)),i&&o.keyCode==De.SPACEBAR&&(r=this._handleSpaceKey(l,o.ctrlKey)),o.keyCode!=De.ENTER&&o.keyCode!=De.F2||(r=this._handleEnterKey(l,o.currentTarget,n)),o.keyCode==De.ESC&&(r=this._handleEscKey(l,o.currentTarget)),o.keyCode==De.TAB&&(r=this._handleTabKey(l,o.currentTarget,o.shiftKey)),r&&(o.preventDefault(),o.stopPropagation())),t)},_moveLeft:function(t,o,r,l,a){var n,i,s=t.parent(),d=s.parent();return o?this.collapseRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!0):(i=d.find(Ze).index(s),n=this._prevHorizontalCell(d,t,i),n[0]||(r?this.lockedTable?(n=this._relatedRow(s),e.contains(this.lockedTable[0],s[0])&&(n=n.prevAll(tt+":first")),n=n.children(Ye+":last")):n=this._tabNext(t,a,!0):(d=this._horizontalContainer(d),n=this._prevHorizontalCell(d,t,i),n[0]!==t[0]&&fe(d.parent(),!0))),this._setCurrent(n)),!0},_moveRight:function(t,o,r,l,a){var n,i,s=t.parent(),d=s.parent();return o?this.expandRow(s):l&&t.is(".k-header")&&this.options.reorderable?this._moveColumn(t,!1):(i=d.find(Ze).index(s),n=this._nextHorizontalCell(d,t,i),n[0]||(r?this.lockedTable?(n=this._relatedRow(s),e.contains(this.table[0],s[0])&&(n=n.nextAll(tt+":first")),n=n.children(Ye+":first")):n=this._tabNext(t,a,!1):(d=this._horizontalContainer(d,!0),n=this._nextHorizontalCell(d,t,i),n[0]!==t[0]&&fe(d.parent(),!0))),this._setCurrent(n)),!0},_moveUp:function(e,t){var o,r,l=e.parent().parent();return t?(o=e.parent(),o=o.prevAll(tt+":first"),o=e.parent().is(tt)?o.children().eq(e.index()):o.children(Ye+":last")):(o=this._prevVerticalCell(l,e),o[0]||(this._lastCellIndex=0,l=this._verticalContainer(l,!0),o=this._prevVerticalCell(l,e),o[0]&&fe(l.parent(),!0))),r=this._lastCellIndex||0,this._setCurrent(o),this._lastCellIndex=r,!0},_moveDown:function(e,t){var o,r,l=e.parent().parent();return t?(o=e.parent(),o=o.nextAll(tt+":first"),o=e.parent().is(tt)?o.children().eq(e.index()):o.children(Ye+":first")):(o=this._nextVerticalCell(l,e),o[0]||(this._lastCellIndex=0,l=this._verticalContainer(l),o=this._nextVerticalCell(l,e),o[0]&&fe(l.parent(),!0))),r=this._lastCellIndex||0,this._setCurrent(o),this._lastCellIndex=r,!0},_moveColumn:function(t,o){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+":visible"),l=v(F(this.columns)),a=r.index(e(t)),n=o?-1:1,i=l[a],s=L(l,this.columns,a,a+n);s>=0&&this.reorderColumn(s,i,o)},_handleHome:function(e,t){var o,r=e.parent(),l=r.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===l[0],n=l[0]===this.tbody[0];if(t?o=this.lockedTable?this.lockedTable.find(ot+">"+et+":first"):this.table.find(ot+">"+et+":first"):(n||a)&&(n&&this.lockedTable&&(r=this._relatedRow(r)),o=r.children(Ye+":first")),o&&o.length)return this._setCurrent(o),!0},_handleEnd:function(e,t){var o,r=e.parent(),l=r.parent(),a=this.lockedTable&&this.lockedTable.children("tbody")[0]===l[0],n=l[0]===this.tbody[0];if(t?o=this.table.find(rt+">"+et+":last"):(n||a)&&(!n&&this.lockedTable&&(r=this._relatedRow(r)),o=r.children(Ye+":last")),o&&o.length)return this._setCurrent(o),!0},_handlePageDown:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()+1),!0)},_handlePageUp:function(){return!!this.options.pageable&&(this.dataSource.page(this.dataSource.page()-1),!0)},_handleTabKey:function(t,o,r){var l,a=this.options.editable&&"incell"==this._editMode();return!(!a||t.is("th"))&&(l=e(Ee()).closest(".k-edit-cell"),l[0]&&l[0]!==t[0]&&(t=l),l=this._tabNext(t,o,r),!!l.length&&(this._handleEditing(t,l,l.closest("table")),!0))},_handleEscKey:function(t,o){var r,l=Ee(),a="incell"==this._editMode();return we(t)?(a?this.closeCell(!0):(r=e(t).parent().index(),l&&l.blur(),this.cancelRow(!0),r>=0&&this._setCurrent(this.items().eq(r).children(et).first())),Co.msie&&Co.version<9&&document.body.focus(),fe(o,!0),!0):!!t.has(l).length&&(fe(o,!0),!0)},_toggleCurrent:function(e,t){var o=e.parent();return o.is(".k-grouping-row")?(o.find(".k-icon:first").click(),!0):!(t||!o.is(".k-master-row"))&&(o.find(".k-icon:first").click(),!0)},_handleSpaceKey:function(t,o){var r,l,a,n,i=this;if(o&&i.groupable&&t.hasClass("k-header"))return r=i.groupable.descriptors(),l=t.attr(xe.attr("field")),a=i.groupable.aggregates(),n=t.attr(xe.attr("title"))||l,i.groupable._canDrag(t)?(r.push({field:l,dir:"asc",aggregates:a||[]}),n+=" "+i.options.messages.ungroupHeader):(r=e.grep(r,function(e){return e.field!==l}),n+=" "+i.options.messages.groupHeader),t.attr("aria-label",n),i.dataSource.group(r),!0},_handleEnterKey:function(t,o,r){var l,a,n=this.options.editable&&this.options.editable.update!==!1,i=r.closest("[role=gridcell]");return r.is("table")||e.contains(t[0],r[0])||(t=i),t.is("th")?(l=t.find(".k-link"),l.length?l.click():t.find(Dt).focus(),!0):!!this._toggleCurrent(t,n)||(a=t.find(":kendoFocusable:first"),a[0]&&!t.hasClass("k-edit-cell")&&t.hasClass("k-state-focused")?(a.focus(),!0):!(!n||r.is(":button,.k-button,textarea"))&&(i[0]||(i=t),this._handleEditing(i,!1,o),!0))},_nextHorizontalCell:function(e,t,o){var r,l,a,n=t.nextAll(Ye);return n.length||(r=e.find(Ze),l=r.index(t.parent()),l!=-1)?n.first():t.hasClass("k-header")?(a=[],V([O(this.columns)[0]],J(r.eq(0).children(":visible").first()),a,0,0),a[o]?a[o][0]:t):t.parent().hasClass("k-filter-row")?r.last().children(Ye).first():r.eq(o).children(Ye).first()},_prevHorizontalCell:function(e,t,o){var r,l,a,n,i=t.prevAll(Ye);return i.length||(r=e.find(Ze),l=r.index(t.parent()),l!=-1)?i.first():t.hasClass("k-header")?(a=[],n=O(this.columns),V([n[n.length-1]],J(r.eq(0).children().last()),a,0,0),a[o]?a[o][0]:t):t.parent().hasClass("k-filter-row")?r.last().children(Ye).last():r.eq(o).children(Ye).last()},_currentDataIndex:function(e,o){var r,l=o.attr("data-index");return l?(r=O(this.columns).length,r&&!e.closest("div").hasClass("k-grid-content-locked")[0]?l-r:l):t},_prevVerticalCell:function(t,o){var r,l=o.parent(),a=t.children(Ze),n=a.index(l),i=this._currentDataIndex(t,o);if(i||o.hasClass("k-header"))return r=Q(o),r.eq(r.length-2);if(i=Math.max(l.children(Ye).index(o),this._lastCellIndex||0),l.hasClass("k-filter-row"))return $(t).filter(b).eq(i);if(n==-1){if(l=t.find("tr.k-filter-row:visible"),!l[0])return(this._hasDetails()||o.parent().find(".k-hierarchy-cell").length)&&i&&i--,$(t).filter(b).eq(i)}else l=0===n?e():a.eq(n-1);return r=l.children(Ye),r.eq(r.length>i?i:0)},_nextVerticalCell:function(e,o){var r,l,a,n,i,s,d=o.parent(),c=e.children(Ze),u=c.index(d),p=this._currentDataIndex(e,o);if(u!=-1&&p===t&&o.hasClass("k-header"))return J(o).eq(1);if(p=p?parseInt(p,10):d.children(Ye).index(o),p=Math.max(p,this._lastCellIndex||0),u==-1?(d=c.eq(0),(this._hasDetails()||d.find(".k-hierarchy-cell").length)&&p++):d=c.eq(u+o[0].rowSpan),l=p,this._currentDataIndex(e,o)!==t)for(a=d.children(":not(.k-group-cell):not(.k-hierarchy-cell)"),n=a.filter(":hidden"),i=0,s=n.length;i<s;i++)a.index(n[i])<p&&l--;return p=l,r=d.children(Ye),r.eq(r.length>p?p:0)},_verticalContainer:function(e,t){var o=e.parent(),r=this._navigatableTables.length,l=Math.floor(r/2),a=Ve(o[0],this._navigatableTables);return t&&(l*=-1),a+=l,(a>=0||a<r)&&(o=this._navigatableTables.eq(a)),o.find(t?">thead":">tbody")},_horizontalContainer:function(e,t){var o,r,l=this._navigatableTables.length;return l<=2?e:(o=e.parent(),r=Ve(o[0],this._navigatableTables),r+=t?1:-1,!t||2!=r&&r!=l?!t&&(1==r||r<0)?e:this._navigatableTables.eq(r).find("thead, tbody"):e)},_tabNext:function(e,t,o){var r=!0,l=o?e.prevAll(Ye+":first"):e.nextAll(":visible:first");return l.length||(l=e.parent(),this.lockedTable&&(r=o&&t==this.lockedTable[0]||!o&&t==this.table[0],l=this._relatedRow(l)),r&&(l=l[o?"prevAll":"nextAll"]("tr:not(.k-grouping-row):not(.k-detail-row):visible:first")),l=l.children(Ye+(o?":last":":first"))),l},_handleEditing:function(o,r,l){var a,n,i=this,s=e(Ee()),d=i._editMode(),c=Co.msie,u=c&&Co.version<9,p=i._editContainer,h=i.options.editable&&i.options.editable.update!==!1;if(l=e(l),n="incell"==d?o.hasClass("k-edit-cell"):o.parent().hasClass("k-grid-edit-row"),i.editable){if(e.contains(p[0],s[0])&&(Co.opera||u?s.blur().change().triggerHandler("blur"):(s.blur(),c&&s.blur())),!i.editable)return fe(l),t;if(!i.editable.end())return i._setCurrent("incell"==d?p:p.children().filter(Ye).first()),a=p.find(":kendoFocusable:first")[0],a&&a.focus(),t;"incell"==d?i.closeCell():(i.saveRow(),n=!0)}r&&i._setCurrent(r),u&&document.body.focus(),fe(l,!0),h&&(!n&&!r||r)&&(d===Zt?e(i.current()).hasClass(Je)||i.editCell(i.current()):i.editRow(i.current().parent()))},_wrapper:function(){var e=this,t=e.table,o=e.options.height,r=e.element;r.is("div")||(r=r.wrap("<div/>").parent()),e.wrapper=r.addClass("k-grid k-widget k-display-block"),o&&(e.wrapper.css(Kt,o),t.css(Kt,"auto")),e._initMobile()},_initMobile:function(){var t,o=this.options,r=this;this._isMobile=o.mobile===!0&&xe.support.mobileOS||"phone"===o.mobile||"tablet"===o.mobile,this._isMobile&&(t=this.wrapper.addClass("k-grid-mobile").wrap("<div data-"+xe.ns+'stretch="true" data-'+xe.ns+'role="view" data-'+xe.ns+'init-widgets="false"></div>').parent(),this.pane=xe.mobile.ui.Pane.wrap(t),this.view=this.pane.view(),this._actionSheetPopupOptions=e(document.documentElement).hasClass("km-root")?{modal:!1}:{align:"bottom center",position:"bottom center",effect:"slideIn:up"},o.height&&this.pane.element.parent().css(Kt,o.height),this._editAnimation="slide",this.view.bind("show",function(){r._isLocked()&&(r._updateTablesWidth(),r._applyLockedContainersWidth(),r._syncLockedContentHeight(),r._syncLockedHeaderHeight(),r._syncLockedFooterHeight())}))},_tbody:function(){var t,o=this,r=o.table;t=r.find(">tbody"),t.length||(t=e("<tbody/>").appendTo(r)),o.tbody=t.attr("role","rowgroup")},_scrollable:function(){var t,o,r,l,a,n,i,s=this,d=s.options,c=d.scrollable,u=c!==!0&&c.virtual&&!s.virtualScrollable,p=!xe.support.kineticScrollNeeded||u?xe.support.scrollbar():0;c&&(t=s.wrapper.children(".k-grid-header"),t[0]||(t=e('<div class="k-grid-header" />').insertBefore(s.table)),t.css(wo?"padding-left":"padding-right",c.virtual?p+1:p),o=e('<table role="grid" />'),yo&&o.attr("cellspacing",0),o.width(s.table[0].style.width),o.append(s.thead),t.empty().append(e('<div class="k-grid-header-wrap k-auto-scrollable" />').append(o)),s.content=s.table.parent(),s.content.is(".k-virtual-scrollable-wrap, .km-scroll-container")&&(s.content=s.content.parent()),s.content.is(".k-grid-content, .k-virtual-scrollable-wrap")||(s.content=s.table.wrap('<div class="k-grid-content k-auto-scrollable" />').parent()),u&&s._createVirtualScrollable(),r=t.children(".k-grid-header-wrap"),s.scrollables=r.add(s.content),l=s.wrapper.find(".k-grid-footer"),l.length&&(s.scrollables=s.scrollables.add(l.children(".k-grid-footer-wrap"))),r.unbind("scroll"+nt).bind("scroll"+nt,function(e){s._scrollLeft!==this.scrollLeft&&s.scrollables.not(e.currentTarget).scrollLeft(this.scrollLeft)}),c.virtual?s.content.find(">.k-virtual-scrollable-wrap").unbind("scroll"+nt).bind("scroll"+nt,function(){s.scrollables.scrollLeft(this.scrollLeft),s.lockedContent&&(s.lockedContent[0].scrollTop=this.scrollTop)}):(a=c.endless,n=s.dataSource.options.pageSize,a&&(s._endlessPageSize=n),s.content.unbind("scroll"+nt).bind("scroll"+nt,function(e){s._scrollLeft=this.scrollLeft,s.scrollables.not(e.currentTarget).scrollLeft(s._scrollLeft),s.lockedContent&&e.currentTarget==s.content[0]&&(s.lockedContent[0].scrollTop=this.scrollTop),a&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!s._endlessFetchInProgress&&s._endlessPageSize<s.dataSource.total()&&(s._skipRerenderItemsCount=s._endlessPageSize,s._endlessPageSize=s._endlessPageSize+n,s.dataSource.options.endless=!0,s._endlessFetchInProgress=!0,s.dataSource.pageSize(s._endlessPageSize))}),i=s.content.data("kendoTouchScroller"),i&&i.destroy(),i=xe.touchScroller(s.content),i&&i.movable&&(s.touchScroller=i,i.movable.bind("change",function(e){s.scrollables.scrollLeft(-e.sender.x),s.lockedContent&&s.lockedContent.scrollTop(-e.sender.y)}),s.one(yt,function(e){e.sender.wrapper.addClass("k-grid-backface")}))))},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new Ho(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()}}),e.virtualScrollable.bind(Rt,Ne(e._onVirtualPaging,e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===eo},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===Zt},_isVirtualPopupEditable:function(){return this.virtualScrollable&&"popup"===this._editMode()},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t,r,l=this,a=l._editableState||{},n=a.model,i=l.dataSource,s=l._isVirtualInlineEditable(),d=l._isVirtualIncellEditable();(s||d)&&n&&i._getByUid(n.uid,i.view())&&(s?(l._shouldClearEditableState=!1,l.editRow(n),l._focusEditable()):d&&(t=l.tbody.children(o(to,n.uid)),r=e(t).children(o(Yt,a.field)),r[0]&&(l._shouldClearEditableState=!1,l.editCell(r),l._focusEditable()))),l._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,r=e._editContainer;r&&!je(r[0],Ee())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()?r.find(o(Jt,t)).find(Mt).eq(0).focus():e._isVirtualIncellEditable()&&r.find(Mt).eq(0).focus())},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable())&&e.virtualScrollable._isElementVisible(e._editContainer)},_cacheEditableState:function(){
var t,o,r=this,l=r._editContainer,a=l?r._modelForContainer(l):null,n=r._isVirtualInlineEditable(),i=r._isVirtualIncellEditable();(n||i)&&a&&(r._clearEditableState(),t=e(Ee()),l&&t[0]&&je(l[0],t[0])&&(t.change(),o=xe.widgetInstance(t,xe.ui),o&&Ge(o.value)&&t.is(Xt)&&(o.value(t.val()),o.trigger(_t))),n?r._editableState={model:a,field:t.closest("["+xe.attr(Jt)+"]").attr(xe.attr(Jt))}:i&&(r._editableState={model:a,field:l.attr(xe.attr(Yt))}))},_clearEditableState:function(){var e=this;e.virtualScrollable&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_renderNoRecordsContent:function(){var t,o=this;o.options.noRecords&&(t=o.table.parent().children("."+At),t.length&&(o.angular("cleanup",function(){return{elements:t.get()}}),t.remove()),o.dataSource&&o.dataSource.view().length||(t=e(o.noRecordsTemplate({})).insertAfter(o.table),o.angular("compile",function(){return{elements:t.get(),data:[{}]}})))},_setContentWidth:function(t){var o,r=this,l="k-grid-content-expander",a='<div class="'+l+'"></div>',n=r.resizable;r.options.scrollable&&r.wrapper.is(":visible")&&(o=r.table.parent().children("."+l),r._setContentWidthHandler=Ne(r._setContentWidth,r),r.dataSource&&r.dataSource.view().length?o[0]&&(o.remove(),n&&n.unbind("resize",r._setContentWidthHandler)):(o[0]||(o=e(a).appendTo(r.table.parent()),n&&n.bind("resize",r._setContentWidthHandler)),r.thead&&(o.width(r.thead.width()),isNaN(parseFloat(t,10))||r.content.scrollLeft(t))),r._applyLockedContainersWidth(),r._syncLockedContentHeight(),r.lockedHeader&&0===r.table[0].clientWidth&&(r.table[0].style.width="1px"))},_applyLockedContainersWidth:function(){if(this.options.scrollable&&this.lockedHeader){var e,t=this.thead.parent(),o=t.parent(),r=this.wrapper[0].clientWidth,l=this._groups(),a=xe.support.scrollbar(),n=this.lockedHeader.find(">table>colgroup>col:not(.k-group-col, .k-hierarchy-col)"),i=t.find(">colgroup>col:not(.k-group-col, .k-hierarchy-col)"),s=W(n),d=W(i);l>0&&(s+=Fe(this.lockedHeader.find(".k-group-cell:first"))*l),s>=r&&(s=r-3*a),this.lockedHeader.add(this.lockedContent).width(s),o[0].style.width=o.parent().width()-s-2+"px",t.add(this.table).width(d),this.virtualScrollable&&!To&&(r-=a),this.content[0].style.width=r-s-2+"px",this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(s),e=this.footer.find(".k-grid-footer-wrap"),e[0].style.width=o[0].clientWidth+"px",e.children().first().width(d))}},_setContentHeight:function(){var e,t,o=this,r=o.options,l=o.wrapper.children(".k-grid-header"),a=xe.support.scrollbar(),n=(r.scrollable||{}).height;r.scrollable&&o.wrapper.is(":visible")&&(n&&""===o.content[0].style.height&&(o.content[0].style.height=n),e=o.wrapper.innerHeight(),e-=Le(l),o.pager&&o.pager.element.is(":visible")&&(e-=Le(o.pager.element)),r.groupable&&(e-=Le(o.wrapper.children(".k-grouping-header"))),r.toolbar&&(e-=Le(o.wrapper.children(".k-grid-toolbar"))),o.footerTemplate&&(e-=Le(o.wrapper.children(".k-grid-footer"))),t=function(e){var t,o;return!!e[0].style.height||(t=e.height(),e.height("auto"),o=e.height(),t!=o?(e.height(""),!0):(e.height(""),!1))},t(o.wrapper)&&(e>2*a?(o.lockedContent&&(a=o.table[0].offsetWidth>o.table.parent()[0].clientWidth?a:0,o.lockedContent.height(e-a)),o.content.height(e)):o.content.height(2*a+1)))},_averageRowHeight:function(){var e,t=this,o=t._items(t.tbody).length,r=t._rowHeight;return 0===o?r:(t._rowHeight||(t._rowHeight=r=Le(t.table)/o,t._sum=r,t._measures=1),e=Le(t.table)/o,r!==e&&(t._measures++,t._sum+=e,t._rowHeight=t._sum/t._measures),r)},_dataSource:function(){var e,o=this,r=o.options,l=r.dataSource;l=Be(l)?{data:l}:l,Ae(l)&&(We(l,{table:o.table,fields:o.columns}),e=r.pageable,Ae(e)&&e.pageSize!==t&&(l.pageSize=e.pageSize)),o.dataSource&&o._refreshHandler?o.dataSource.unbind(_t,o._refreshHandler).unbind($e,o._progressHandler).unbind(Qe,o._errorHandler):(o._refreshHandler=Ne(o.refresh,o),o._progressHandler=Ne(o._requestStart,o),o._errorHandler=Ne(o._error,o)),o.dataSource=Re.create(l).bind(_t,o._refreshHandler).bind($e,o._progressHandler).bind(Qe,o._errorHandler)},_error:function(){this._progress(!1)},_requestStart:function(){this._progress(!0)},_modelChange:function(t){var o,r,l,a,n,i,s,d,c,u,p=this,h=p.tbody,f=t.model,g=p.tbody.find("tr["+xe.attr("uid")+"="+f.uid+"]"),m=g.hasClass("k-alt"),b=p._items(h).index(g),k=p.lockedContent;if(k&&(o=p._relatedRow(g)),g.add(o).children(".k-edit-cell").length&&!p.options.rowTemplate)g.add(o).children(":not(.k-group-cell,.k-hierarchy-cell)").each(function(){r=e(this),l=U(p.columns)[p.cellIndex(r)],l.field===t.field&&(r.hasClass("k-edit-cell")?r.addClass("k-dirty-cell"):p._displayCell(r,l,f))});else if(!g.hasClass("k-grid-edit-row")){for(i=e().add(g),k&&(a=(m?p.lockedAltRowTemplate:p.lockedRowTemplate)(f),i=i.add(o),o.replaceWith(a)),p.angular("cleanup",function(){return{elements:i.get()}}),a=(m?p.altRowTemplate:p.rowTemplate)(f),g.replaceWith(a),a=p._items(h).eq(b),u=[{dataItem:f}],k&&(g=g.add(o),o=p._relatedRow(a)[0],pe(a[0],o),a=a.add(o),u.push({dataItem:f})),p.angular("compile",function(){return{elements:a.get(),data:u}}),n=p.options.selectable,(n||p._checkBoxSelection)&&g.hasClass("k-state-selected")&&p.select(a),d=i.children(":not(.k-group-cell,.k-hierarchy-cell)"),s=a.children(":not(.k-group-cell,.k-hierarchy-cell)"),b=0,c=p.columns.length;b<c;b++)l=p.columns[b],r=s.eq(b),n&&d.eq(b).hasClass("k-state-selected")&&r.addClass("k-state-selected");p.trigger("itemChange",{item:a,data:f,ns:He})}},_pageable:function(){var t,o=this,r=o.options.pageable;r&&(t=o.wrapper.children("div.k-grid-pager"),t.length||(t=e('<div class="k-pager-wrap k-grid-pager"/>').appendTo(o.wrapper)),o.pager&&o.pager.destroy(),o.pager="object"==typeof r&&r instanceof xe.ui.Pager?r:new xe.ui.Pager(t,We({},r,{dataSource:o.dataSource})),o.pager.bind("pageChange",function(e){o.trigger("page",{page:e.index})&&e.preventDefault()}))},_footer:function(){var t,o,r,l=this,a=l.dataSource.aggregates(),n="",i=l.footerTemplate,s=l.options,d=l.footer||l.wrapper.find(".k-grid-footer");i?(n=e(l._wrapFooter(i(a))),d.length?(o=n,l.angular("cleanup",function(){return{elements:d.get()}}),d.replaceWith(o),d=l.footer=o):d=l.footer=s.scrollable?s.pageable?n.insertBefore(l.wrapper.children("div.k-grid-pager")):n.appendTo(l.wrapper):n.insertBefore(l.tbody),l.angular("compile",function(){return{elements:d.find("td:not(.k-group-cell, .k-hierarchy-cell)").get(),data:qe(l.columns,function(e){return{column:e,aggregate:a[e.field]}})}})):d&&!l.footer&&(l.footer=d),d.length&&(s.scrollable&&(t=d.attr("tabindex",-1).children(".k-grid-footer-wrap"),l.scrollables=e(l.scrollables.filter(function(){return!e(this).is(".k-grid-footer-wrap")}).toArray()).add(t)),l._footerWidth&&d.find("table").css("width",l._footerWidth),t&&(r=l.content.scrollLeft(),s.scrollable!==!0&&s.scrollable.virtual&&(r=l.wrapper.find(".k-virtual-scrollable-wrap").scrollLeft()),t.scrollLeft(r))),l.lockedContent&&(l._appendLockedColumnFooter(),l._applyLockedContainersWidth(),l._syncLockedFooterHeight())},_wrapFooter:function(t){var o=this,r="",l=xe.support.mobileOS?0:xe.support.scrollbar();return o.options.scrollable?(r=e('<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table'+(yo?' cellspacing="0"':"")+"><tbody>"+t+"</tbody></table></div></div>"),o._appendCols(r.find("table")),r.css(wo?"padding-left":"padding-right",l),r):'<tfoot class="k-grid-footer">'+t+"</tfoot>"},_columnMenu:function(){var e,o,r,l,a,n,i,s,d,c=this,u=U(c.columns),p=c.options,h=p.columnMenu,f=Pe(c.columns,function(e){return e.columns!==t}).length>0,g=this._isMobile,m=function(e){c.trigger(gt,{field:e.field,container:e.container})},b=function(e){c.trigger(bt,{field:e.field,container:e.container})},k=function(e){fe(e.closest("table"),!0)},_=function(e){c.trigger("sort",{sort:e.sort})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},v=function(e){c.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(c._clearEditableState(),c.dataSource.options.endless&&(c.dataSource.options.endless=null,c._endlessPageSize=c.dataSource.options.pageSize,c.dataSource.pageSize(c.dataSource.options.pageSize)))},w=p.$angular;if(h)for("boolean"==typeof h&&(h={}),c._setColumnsMediaVisibility(u),n=$(c.thead),i=0,s=n.length;i<s;i++)o=u[i],d=n.eq(i),o.command||!o.field&&!d.attr("data-"+xe.ns+"field")||(e=d.data("kendoColumnMenu"),e&&e.destroy(),l=o.sortable!==!1&&h.sortable!==!1&&p.sortable!==!1&&We({},p.sortable,{compare:(o.sortable||{}).compare}),a=!(!p.filterable||o.filterable===!1||h.filterable===!1)&&We({pane:c.pane},p.filterable,o.filterable),o.filterable&&o.filterable.dataSource&&(a.forceUnique=!1,a.checkSource=o.filterable.dataSource),a&&(a.format=o.format),r={dataSource:c.dataSource,values:o.values,columns:h.columns,sortable:l,filterable:a,messages:h.messages,owner:c,closeCallback:k,init:m,open:b,pane:c.pane,sort:_,filtering:v,filter:g?":not(.k-column-active)":"",lockedColumns:!f&&o.lockable!==!1&&O(u).length>0},w&&(r.$angular=w),d.kendoColumnMenu(r))},_headerCells:function(){return e(this.thead).find("th").filter(function(){var t=e(this);return!t.hasClass("k-group-cell")&&!t.hasClass("k-hierarchy-cell")})},_filterable:function(){var e,t,o,r,l,a,n,i=this,s=U(i.columns),d=function(e){i.trigger(ft,{field:e.field,container:e.container})},c=function(e){fe(e.closest("table"),!0)},u=function(e){i.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(i._clearEditableState(),i.dataSource.options.endless&&(i.dataSource.options.endless=null,i._endlessPageSize=i.dataSource.options.pageSize,i.dataSource.pageSize(i.dataSource.options.pageSize)))},p=function(e){i.trigger(mt,{field:e.field,container:e.container})},h=i.options.filterable;if(h&&typeof h.mode==$t&&h.mode.indexOf("menu")==-1&&(h=!1),h&&!i.options.columnMenu)for(t=$(i.thead),r=0,l=t.length;r<l;r++)o=t.eq(r),s[r].filterable===!1||s[r].command||!s[r].field&&!o.attr("data-"+xe.ns+"field")||(e=o.data("kendoFilterMenu"),e&&e.destroy(),e=o.data("kendoFilterMultiCheck"),e&&e.destroy(),a=s[r].filterable,n=We({},h,a,{dataSource:i.dataSource,values:s[r].values,format:s[r].format,closeCallback:c,title:s[r].title||s[r].field,init:d,open:p,pane:i.pane,change:u}),a&&a.messages&&(n.messages=We(!0,{},h.messages,a.messages)),a&&a.dataSource&&(n.forceUnique=!1,n.checkSource=a.dataSource),a&&a.multi?o.kendoFilterMultiCheck(n):o.kendoFilterMenu(n))},_filterRow:function(){var t,o,r,l,a,n,i,s,d,c,u,p,h,f,g,m=this;if(m._hasFilterRow())for(o=m.options.$angular,r=U(m.columns),l=m.options.filterable,a=m.thead.find(".k-filter-row"),n=function(e){m.trigger("filter",{filter:e.filter,field:e.field})?e.preventDefault():(m._clearEditableState(),m.dataSource.options.endless&&(m.dataSource.options.endless=null,m._endlessPageSize=m.dataSource.options.pageSize,m.dataSource.pageSize(m.dataSource.options.pageSize)))},this._updateHeader(this.dataSource.group().length),i=0;i<r.length;i++)if(d=r[i],c=m.options.filterable.operators,u=!1,p=e("<th/>"),h=d.field,d.hidden&&p.hide(),a.append(p),h&&d.filterable!==!1){if(f=d.filterable&&d.filterable.cell||{},s=m.options.dataSource,s instanceof Re&&(s=m.options.dataSource.options),g=We(!0,{},l.messages),d.filterable&&We(!0,g,d.filterable.messages),f.enabled===!1){p.html("&nbsp;");continue}f.dataSource&&(s=f.dataSource,u=!0),d.filterable&&d.filterable.operators&&(c=d.filterable.operators),t={column:d,dataSource:m.dataSource,suggestDataSource:s,customDataSource:u,field:h,messages:g,values:d.values,template:f.template,delay:f.delay,inputWidth:f.inputWidth,suggestionOperator:f.suggestionOperator,minLength:f.minLength,dataTextField:f.dataTextField,operator:f.operator,operators:c,showOperators:f.showOperators,change:n},o&&(t.$angular=o),e("<span/>").attr(xe.attr("field"),h).appendTo(p).kendoFilterCell(t)}else p.html("&nbsp;")},_sortable:function(){var e,t,o,r,l,a,n=this,i=U(n.columns),s=n.options.sortable,d=function(e){n.trigger("sort",{sort:e.sort})?e.preventDefault():n._clearEditableState()};if(s){for(r=$(n.thead),l=0,a=r.length;l<a;l++)e=i[l],e.sortable!==!1&&!e.command&&e.field&&(o=r.eq(l),t=o.data("kendoColumnSorter"),t&&t.destroy(),o.attr("data-"+xe.ns+"field",e.field).kendoColumnSorter(We({},s,e.sortable,{dataSource:n.dataSource,aria:!0,filter:":not(.k-column-active)",change:d})));r=null}},_columns:function(t){var o,r,l,a,n=this,i=n.table,s=i.find("col"),c=n.element.find("thead:first th[data-index]"),u=n.options.dataSource;if(t=t.length?t:qe(i.find("th"),function(t,o){t=e(t);var r=t.attr(xe.attr("sortable")),l=t.attr(xe.attr("filterable")),a=t.attr(xe.attr("type")),n=t.attr(xe.attr("groupable")),i=t.attr(xe.attr("field")),d=t.attr(xe.attr("title")),c=t.attr(xe.attr("menu"));return i||(i=t.text().replace(/\s|[^A-z0-9]/g,"")),{field:i,type:a,title:d,sortable:"false"!==r,filterable:"false"!==l,groupable:"false"!==n,menu:c,template:t.attr(xe.attr("template")),width:s.eq(o).css("width")}}),o=!(n.table.find("tbody tr").length>0&&(!u||!u.transport)),n.options.scrollable){if(a=t,r=O(t),t=N(t),r.length>0&&0===t.length)throw Error("There should be at least one non locked column");te(n.element.find("tr:has(th):first"),a),t=r.concat(t)}n.columns=d(t,o),c.length&&n.columns.length&&(l=U(n.columns),qe(c,function(t){var o,r;t=e(t),o=t.attr("id"),r=xe.parseInt(t.attr("data-index")),o&&(l[r].headerAttributes=We(l[r].headerAttributes,{id:o}))})),e.grep(U(n.columns),function(e){return e.selectable}).length&&(n._selectedIds={},n._checkBoxSelection=!0,n.wrapper.on(Nt+nt,"tbody > tr "+Dt,Ne(n._checkboxClick,n)),n.wrapper.on(Nt+nt,"thead > tr "+Dt,Ne(n._headerCheckboxClick,n)))},_headerCheckboxClick:function(t){var o=this,r=e(t.target),l=r.prop("checked"),a=r.closest(".k-grid.k-widget").getKendoGrid();o===a&&(l?o.select(a.items()):o.clearSelection())},_checkboxClick:function(t){var o=this,r=e(t.target).closest("tr"),l=!r.hasClass(Ft);o===r.closest(".k-grid.k-widget").getKendoGrid()&&(l?o.select(r):o._deselectCheckRows(r))},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_tmpl:function(e,o,a,n){var i,s,d,c,u,p=this,h=We({},xe.Template,p.options.templateSettings),f=h.paramName,g=o.length,m={storage:{},count:0},b=p._hasDetails(),k=[],_=p._groups(),v=p.options.navigatable,w=xe.attr("field"),C="";if(!e){for(e="<tr",a&&k.push("k-alt"),b&&k.push("k-master-row"),k.length&&(e+=' class="'+k.join(" ")+'"'),g&&(e+=" "+xe.attr("uid")+'="#='+xe.expr("uid",h.paramName)+'#"'),e+=" role='row'>",_>0&&!n&&(e+=r(_)),b&&(e+='<td class="k-hierarchy-cell" aria-expanded="false"><a class="k-icon k-i-expand" href="\\#" '+po+'="'+uo+'" tabindex="-1"></a></td>'),i=0;i<g;i++)d=o[i],s=d.template,c=typeof s,u=d.field,p._editMode()===Zt&&u&&(d.attributes=d.attributes||{},p.virtualScrollable&&(d.attributes[w]=u),C=p._dirtyCellTemplate(u,f),d.attributes["class"]=d.attributes["class"]||"",d.attributes["class"].indexOf(C)<0&&(d.attributes["class"]+=C)),d.command&&(d.attributes=d.attributes||{},t!==d.attributes["class"]?d.attributes["class"]+=" k-command-cell":d.attributes["class"]="k-command-cell"),e+="<td"+l(d.attributes),v&&(e+=" aria-describedby='"+d.headerAttributes.id+"'"),e+=" role='gridcell'>",e+=p._cellTmpl(d,m),e+="</td>";e+="</tr>"}return e=xe.template(e,h),m.count>0?Ne(e,m.storage):e},_dirtyCellTemplate:function(e,t){var o;return e&&t?(o="["===e.charAt(0)?xe.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+o+" ? ' k-dirty-cell' : '' #"):""},_headerCellText:function(e){var t=this,o=We({},xe.Template,t.options.templateSettings),r=e.headerTemplate,l=typeof r,a=e.title||e.field||"";return l===Ut?a=xe.template(r,o)({}):l===$t&&(a=r),a},_cellTmpl:function(e,t){var o,r,l=this,a=We({},xe.Template,l.options.templateSettings),n=e.template,i=a.paramName,s=e.field,d="",c=e.format,u=typeof n,p=e.values;if(e.command){if(Be(e.command)){for(o=0,r=e.command.length;o<r;o++)d+=e.command[o].visible?xe.format("#= {0}(data)? '{1}':'' #",e.command[o].visible,l._createButton(e.command[o]).replace(fo,"\\#").replace(/'/gi,"\\'")):l._createButton(e.command[o]).replace(fo,"\\#");return d}return l._createButton(e.command).replace(fo,"\\#")}return e.selectable?_o:(d+=l._dirtyIndicatorTemplate(s,i),u===Ut?(t.storage["tmpl"+t.count]=n,d+="#=this.tmpl"+t.count+"("+i+")#",t.count++):u===$t?d+=n:p&&p.length&&Ae(p[0])&&"value"in p[0]&&s?(d+="#var v ="+xe.stringify(oe(p)).replace(fo,"\\#")+"#",d+="#var f = v[",a.useWithBlock||(d+=i+"."),d+=s+"]#",d+="${f != null ? f : ''}"):(d+=e.encoded?"#:":"#=",c&&(d+='kendo.format("'+c.replace(ho,"\\$1")+'",'),s?(s=xe.expr(s,i),d+=s+"==null?'':"+s):d+="''",c&&(d+=")"),d+="#"),d)},_dirtyIndicatorTemplate:function(e,t){var o;return e&&t?(o="["===e.charAt(0)?xe.expr(e,t+".dirtyFields"):t+".dirtyFields['"+e+"']","#= "+t+" && "+t+".dirty && "+t+".dirtyFields && "+o+" ? '<span class=\"k-dirty\"></span>' : '' #"):""},_templates:function(){var t=this,o=t.options,r=t.dataSource,l=r.group(),a=t.footer||t.wrapper.find(".k-grid-footer"),n=r.aggregate(),i=U(t.columns),s=U(O(t.columns)),d=o.scrollable?U(N(t.columns)):i,c=Pe(v(s),function(e,t){return e.groupHeaderColumnTemplate&&0!==t}),u=Pe(v(d),function(e){return e.groupHeaderColumnTemplate});if(o.scrollable&&s.length){if(o.rowTemplate||o.altRowTemplate)throw Error("Having both row template and locked columns is not supported");t.rowTemplate=t._tmpl(o.rowTemplate,d,!1,!0),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,d,!0,!0),t.lockedRowTemplate=t._tmpl(o.rowTemplate,s),t.lockedAltRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,s,!0)}else t.rowTemplate=t._tmpl(o.rowTemplate,d),t.altRowTemplate=t._tmpl(o.altRowTemplate||o.rowTemplate,d,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(o.detailTemplate||"")),(t._group&&!Ke(n)||!Ke(n)&&!a.length||Pe(i,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(i,n,"footerTemplate","k-footer-template")),l&&Pe(i,function(e){return e.groupFooterTemplate}).length&&(n=e.map(l,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(d,n,"groupFooterTemplate","k-group-footer",s.length),o.scrollable&&s.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(s,n,"groupFooterTemplate","k-group-footer"))),l&&(c.length||u.length)?(n=e.map(l,function(e){return e.aggregates}),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(v(d),n,"groupHeaderColumnTemplate","k-grouping-row",s.length,u),o.scrollable&&s.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(v(s),n,"groupHeaderColumnTemplate","k-grouping-row",0,c))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t,o,r,l='<div class="{0}">{1}</div>',a='<div class="k-grid-norecords-template"{1}>{0}</div>',n=this.options.scrollable&&!this.wrapper[0].style.height?' style="margin:0 auto;position:static;"':"",i={storage:{},count:0},s=e.extend({},xe.Template,this.options.templateSettings),d=s.paramName,c="";return t=this.options.noRecords.template?this.options.noRecords.template:xe.format(a,this.options.messages.noRecords,n),o=typeof t,"function"===o?(i.storage["tmpl"+i.count]=t,c+="#=this.tmpl"+i.count+"("+d+")#",i.count++):"string"===o&&(c+=t),r=xe.template(xe.format(l,At,c),s),i.count>0&&(r=e.proxy(r,i.storage)),r},_footerTmpl:function(e,t,o,a,n){var i,s,d,c,u,p=this,h=We({},xe.Template,p.options.templateSettings),f=h.paramName,g="",m={},b=0,k={},_=p._groups(),v=p.dataSource._emptyAggregates(t);for(g+='<tr class="'+a+'">',_>0&&!n&&(g+=r(_)),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),i=0,s=e.length;i<s;i++)u=e[i],d=u[o],c=typeof d,g+="<td"+l(u.footerAttributes)+">",d?(c!==Ut&&(k=v[u.field]?We({},h,{paramName:f+"['"+u.field+"']"}):{},d=xe.template(d,k)),m["tmpl"+b]=d,g+="#=this.tmpl"+b+"("+f+")#",b++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=xe.template(g,h),b>0?Ne(g,m):g},_groupHeaderTmpl:function(e,o,r,l,a,n){var i,s,d,c,u,p=this,h=We({},xe.Template,p.options.templateSettings),f=h.paramName,g="",m={},b=0,k={},_=p.dataSource._emptyAggregates(o),v=n.length?Ve(n[0],e):-1;if(g+='<tr role="row" class="'+l+'">',a||(g+='# for (var i = 0; i < data.groupCells; i++) { #<td class="k-group-cell">&nbsp;</td># } #'),p._hasDetails()&&(g+='<td class="k-hierarchy-cell">&nbsp;</td>'),v<0)return g+=a?"":Ce(e.length),t;if(v<oo&&n.length<=1&&!a)return g+=a?"":Ce(e.length),xe.template(g,h);for(v<oo?(v=a?0:1,g+=a?"":Ce(v)):g+=a?ye(v):Ce(v),i=v,s=e.length;i<s;i++)u=e[i],d=u[r],c=typeof d,g+="<td>",d?(c!==Ut&&(k=_[u.field]?We({},h,{paramName:f+"['"+u.field+"']"}):{},d=xe.template(d,k)),m["tmpl"+b]=d,g+="#=this.tmpl"+b+"("+f+")#",b++):g+="&nbsp;",g+="</td>";return g+="</tr>",g=xe.template(g,h),b>0?Ne(g,m):g},_detailTmpl:function(e){var t=this,o="",l=We({},xe.Template,t.options.templateSettings),a=l.paramName,n={},i=0,s=t._groups(),d=v(U(t.columns)).length,c=typeof e;return o+='<tr class="k-detail-row">',s>0&&(o+=r(s)),o+='<td class="k-hierarchy-cell"></td><td class="k-detail-cell"'+(d?' colspan="'+d+'"':"")+">",c===Ut?(n["tmpl"+i]=e,o+="#=this.tmpl"+i+"("+a+")#",i++):o+=e,o+="</td></tr>",o=xe.template(o,l),i>0?Ne(o,n):o},_hasDetails:function(){var e=this;return null!==e.options.detailTemplate||(e._events[ht]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,o=t&&typeof t.mode==$t&&t.mode.indexOf("row")!=-1,r=this.columns,l=e.grep(r,function(e){return e.filterable===!1});return r.length&&l.length==r.length&&(o=!1),o},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&O(t.columns).length)throw Error("Having both detail template and locked columns is not supported");t.table.on(Nt+nt,".k-hierarchy-cell .k-i-expand, .k-hierarchy-cell .k-i-collapse",function(o){var r,l,a=e(this),n=a.closest("td.k-hierarchy-cell"),i=a.hasClass("k-i-expand"),s=a.closest("tr.k-master-row"),d=t.detailTemplate,c=t._hasDetails(),u=i?co:uo,p=!!i;return a.toggleClass("k-i-expand",!i).toggleClass("k-i-collapse",i).attr(po,u),n.attr("aria-expanded",p),r=s.next(),c&&!r.hasClass("k-detail-row")&&(l=t.dataItem(s),r=e(d(l)).addClass(s.hasClass("k-alt")?"k-alt":"").insertAfter(s),t.angular("compile",function(){return{elements:r.get(),data:[{dataItem:l}]}}),t.trigger(ht,{masterRow:s,detailRow:r,data:l,detailCell:r.find(".k-detail-cell")})),t.trigger(i?St:Tt,{masterRow:s,detailRow:r}),r.toggle(i),o.preventDefault(),!1})},dataItem:function(t){if(t=e(t)[0],!t)return null;var o,r,l=this.tbody.children(),a=/k-grouping-row|k-detail-row|k-group-footer/,n=t.sectionRowIndex;for(r=n,o=0;o<n;o++)a.test(l[o].className)&&r--;return this._data[r]},expandRow:function(t){e(t).find("> td .k-i-expand").click()},collapseRow:function(t){e(t).find("> td .k-i-collapse").click()},_createHeaderCells:function(e,o){var r,a,n,i,s,d,c,u=this,p="",h=u.options.messages,f=U(u.columns),g=u.dataSource.group();for(r=0,i=e.length;r<i;r++)a=e[r].column||e[r],n=u._headerCellText(a),d="",c=Ve(a,f),a.selectable?(p+="<th scope='col'"+l(a.headerAttributes),o&&!e[r].colSpan&&(p+=" rowspan='"+o+"'"),c>-1&&(p+=xe.attr("index")+"='"+c+"'"),n=a.headerTemplate?n:xe.template(vo)({}),p+=">"+n+"</th>"):a.command?(p+="<th scope='col'"+l(a.headerAttributes),o&&!e[r].colSpan&&(p+=" rowspan='"+o+"'"),c>-1&&(p+=xe.attr("index")+"='"+c+"'"),p+=">"+n+"</th>"):(a.field&&(d=xe.attr("field")+"='"+a.field+"' "),p+="<th scope='col' role='columnheader' "+d,p+=" aria-haspopup='true'",o&&!e[r].colSpan&&(p+=" rowspan='"+o+"'"),e[r].colSpan>1&&(p+='colspan="'+(e[r].colSpan-A(a.columns))+'" ',p+=xe.attr("colspan")+"='"+e[r].colSpan+"'"),a.title&&(s=a.title.replace('"',"&quot;").replace(/'/g,"'"),p+=xe.attr("title")+'="'+s+'" '),a.groupable!==t&&(p+=xe.attr("groupable")+"='"+a.groupable+"' "),ge(u,a)&&(p+="aria-label='"+(s||a.field)+" ",p+=me(g,a.field)?h.ungroupHeader:h.groupHeader,p+="' "),a.aggregates&&a.aggregates.length&&(p+=xe.attr("aggregates")+"='"+a.aggregates+"'"),c>-1&&(p+=xe.attr("index")+"='"+c+"'"),p+=l(a.headerAttributes),p+=">"+n+"</th>");return p},_appendLockedColumnContent:function(){var t,o,r,l,a,n=this.columns,i=this.table.find("colgroup"),s=i.find("col:not(.k-group-col,.k-hierarchy-col)"),d=e(),c=0,u=0;for(t=0,o=n.length;t<o;t++)if(n[t].locked)if(_(n[t])){for(l=1,n[t].columns&&(l=U(n[t].columns).length-A(n[t].columns)),l=l||1,a=0;a<l;a++)d=d.add(s.eq(t+u+a-c));u+=l-1}else c++;r=e('<div class="k-grid-content-locked"><table'+(yo?' cellspacing="0"':"")+"><colgroup/><tbody></tbody></table></div>"),i.detach(),r.find("colgroup").append(d),i.insertBefore(this.table.find("tbody")),this.lockedContent=r.insertBefore(this.content),this.lockedTable=r.children("table")},_appendLockedColumnFooter:function(){var t,o,r=this,l=r.footer,a=l.find(".k-footer-template>td"),n=l.find(".k-grid-footer-wrap>table>colgroup>col"),i=e('<div class="k-grid-footer-locked"><table><colgroup /><tbody><tr class="k-footer-template"></tr></tbody></table></div>'),s=r._groups(),d=e(),c=e();for(d=d.add(a.filter(".k-group-cell")),t=0,o=U(O(r.columns)).length;t<o;t++)d=d.add(a.eq(t+s));for(c=c.add(n.filter(".k-group-col")),t=0,o=v(U(K(r.columns))).length;t<o;t++)c=c.add(n.eq(t+s));d.appendTo(i.find("tr")),c.appendTo(i.find("colgroup")),r.lockedFooter=i.prependTo(l)},_appendLockedColumnHeader:function(t){var o,r,l,a,n,i,s,d,c,u,p,h=this,f=this.columns,g=[],m=0,b=e(),k=h._hasFilterRow(),v=0,w=e(),C=0,S=e(),T=h.thead.prev().find("col:not(.k-group-col,.k-hierarchy-col)"),x=h.thead.find("tr:first .k-header:not(.k-group-cell,.k-hierarchy-cell)"),H=h.thead.find(".k-filter-row").find("th:not(.k-group-cell,.k-hierarchy-cell)"),R=0;for(o=0,l=f.length;o<l;o++){if(f[o].locked){if(s=x.eq(o),C=U(f[o].columns||[]).length,_(f[o])){for(d=null,f[o].columns&&(d=C-A(f[o].columns)),d=d||1,c=0;c<d;c++)b=b.add(T.eq(o+R+c-m));R+=d-1}for(V([f[o]],J(s),g,0,0),C=C||1,u=0;u<C;u++)w=w.add(H.eq(v+u));v+=C}f[o].columns&&(m+=A(f[o].columns)),_(f[o])||m++}if(g.length){for(r='<div class="k-grid-header-locked" style="width:1px"><table'+(yo?' cellspacing="0"':"")+"><colgroup/><thead>",r+=Array(g.length+1).join("<tr></tr>"),r+=(k?'<tr class="k-filter-row" />':"")+"</thead></table></div>",i=e(r),T=i.find("colgroup"),T.append(h.thead.prev().find("col.k-group-col").add(b)),a=i.find("thead tr:not(.k-filter-row)"),o=0,l=g.length;o<l;o++)S=y(g[o]),a.eq(o).append(h.thead.find("tr:eq("+o+") .k-group-cell").add(S));return p=B(this.thead),g.length<p&&q(i,p-g.length),n=i.find(".k-filter-row"),n.append(h.thead.find(".k-filter-row .k-group-cell").add(w)),this.lockedHeader=i.prependTo(t),this.thead.find(".k-group-cell").remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);xe.destroy(e),e.off(nt).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t,o,r,l,a,n,i,s,d,c=this,u=c.columns,p=c._hasDetails()&&u.length,h=c._hasFilterRow(),f="",g=c.table.find(">thead"),m=c.element.find("thead:first").length>0;if(g.length||(g=e("<thead/>").insertBefore(c.tbody)),c.lockedHeader&&c.thead?(o=c.thead.find("tr:has(th):not(.k-filter-row)").html(""),o.remove(),o=e(),c._removeLockedContainers()):o=c.element.find(m?"thead:first tr:has(th):not(.k-filter-row)":"tr:has(th):first"),o.length)for(t=0;t<u.length;t++)l=Ve(u[t],U(u)),a=$(o.parent()).filter("th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(l),u[t].hidden&&(a[0].style.display="none");else if(o=g.children().first(),!o.length){for(r=[{rowSpan:1,cells:[],index:0}],c._prepareColumns(r,u),t=0;t<r.length;t++)f+="<tr>",p&&(f+='<th class="k-hierarchy-cell" scope="col">'+c.options.messages.expandCollapseColumnHeader+"</th>"),f+=c._createHeaderCells(r[t].cells,r[t].rowSpan),f+="</tr>";o=e(f)}h&&(n=e("<tr/>"),n.addClass("k-filter-row"),(p||o.find(".k-hierarchy-cell").length)&&n.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),i=(c.thead||g).find(".k-filter-row"),i.length&&(xe.destroy(i),i.remove()),g.append(n)),o.children().length?p&&!o.find(".k-hierarchy-cell")[0]&&o.prepend('<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'):(f="",p&&(f+='<th class="k-hierarchy-cell" scope="col">&nbsp;</th>'),f+=c._createHeaderCells(u),o.html(f)),o.attr("role","row").find("th").addClass("k-header"),c.options.scrollable||g.addClass("k-grid-header"),o.find("script").remove().end().prependTo(g),c.thead&&c._destroyColumnAttachments(),this.angular("cleanup",function(){return{elements:g.find("th"+et).get()}}),this.angular("compile",function(){return{elements:g.find(at).get(),data:qe(u,function(e){return{column:e}})}}),c.thead=g.attr("role","rowgroup"),c._sortable(),c._filterable(),c._filterRow(),c._scrollable(),c._columnMenu(),d=this.options.scrollable&&O(this.columns).length,d&&(s=c._appendLockedColumnHeader(c.thead.closest(".k-grid-header")),c._appendLockedColumnContent(),c.lockedContent.bind("DOMMouseScroll"+nt+" mousewheel"+nt,Ne(c._wheelScroll,c)),c._updateLockedCols()),c._updateCols(),c._updateColumnCellIndex(),c._updateFirstColumnClass(),c._resizable(),c._draggable(),c._reorderable(),c._updateHeader(c._groups()),d&&(s&&c._syncLockedHeaderHeight(),c._applyLockedContainersWidth()),c.groupable&&c._attachGroupable()},_retrieveFirstColumn:function(t,o){var r,l=e();if(o.length&&t[0]){for(r=t[0];r.columns&&r.columns.length;)r=r.columns[0],o=o.filter(":not(:first())");l=l.add(o)}return l},_updateFirstColumnClass:function(){var t,o,r=this,l=r.columns||[],a=r._hasDetails()&&l.length;a||r._groups()||(t=r.thead.find(">tr:not(.k-filter-row):not(:first)"),l=N(l),o=r._retrieveFirstColumn(l,t),r._isLocked()&&(t=r.lockedHeader.find("thead>tr:not(.k-filter-row):not(:first)"),l=O(r.columns),o=o.add(r._retrieveFirstColumn(l,t))),o.each(function(){var t=e(this).find("th");t.removeClass("k-first"),t.eq(0).addClass("k-first")}))},_prepareColumns:function(e,t,o,r){var l,a,n=r||e[e.length-1],i=e[n.index+1],s=0;for(l=0;l<t.length;l++)a={column:t[l],colSpan:0},n.cells.push(a),t[l].columns&&t[l].columns.length&&(i||(i={rowSpan:0,cells:[],index:e.length},e.push(i)),a.colSpan=t[l].columns.length,this._prepareColumns(e,t[l].columns,a,i),s+=a.colSpan-1,n.rowSpan=e.length-n.index);o&&(o.colSpan+=s)},_wheelScroll:function(e){var t,o,r;e.ctrlKey||(t=this.content,this.options.scrollable.virtual&&(t=this.virtualScrollable.verticalScrollbar),o=t.scrollTop(),r=xe.wheelDeltaY(e),r&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&r<0||t[0].scrollTop>0&&r>0)&&e.preventDefault(),t.scrollTop(o+-r)))},_isLocked:function(){return null!=this.lockedHeader},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?ee(e,j(G(this.columns)),this._hasDetails(),0):ee(e,j(v(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e,t,o,r,l,a=this,n=$(a.thead),i=U(a.columns);if(a.options.sortable)for(r=0,l=n.length;r<l;r++)e=i[r],e.sortable!==!1&&!e.command&&e.field&&(t=n.eq(r),o=t.data("kendoColumnSorter"),o&&o.refresh())},_updateCols:function(e){e=e||this.thead.parent().add(this.table),this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e=e||this.lockedHeader.find("table").add(this.lockedTable),ee(e,j(K(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?ee(e,j(G(this.columns)),this._hasDetails(),0):ee(e,j(v(this.columns)),this._hasDetails(),this._groups())},_autoColumns:function(e){if(e&&e.toJSON){var t,o,r=this;e=e.toJSON(),o=!(r.table.find("tbody tr").length>0&&(!r.dataSource||!r.dataSource.transport));for(t in e)r.columns.push({field:t,encoded:o,headerAttributes:{id:xe.guid()}});r._thead(),r._templates()}},_rowsHtml:function(e,t){var o,r,l=this,a="",n=t.rowTemplate,i=t.altRowTemplate;for(o=0,r=e.length;o<r;o++)l._skipRerenderItemsCount>0?l._skipRerenderItemsCount--:a+=o%2?i(e[o]):n(e[o]),l._data.push(e[o]);return a},_groupData:function(e,t,o){var r,l=this,a=l._groupAggregatesDefaultObject||{},n=e.items,i=We({},a,e.aggregates),s=We({},{
field:e.field,value:e.value,items:n,aggregates:i},e.aggregates[o?o.field:e.field]),d={};if(!t)for(r in i)d[r]=We({},i[r],{group:{field:e.field,value:e.value,items:n}});return We({},d,s)},_groupRowHtml:function(e,t,o,r,l,a,n){var i,s,d,c=this,u="",p=e.field,h=Pe(U(c.columns),function(e){return e.field==p})[0]||{},f=h.groupHeaderTemplate?h.groupHeaderTemplate:v(c.columns)[0].groupHeaderColumnTemplate,g=(h.title||p)+": "+re(e.value,h.format,h.values,h.encoded),m=e.items,b=c._groups(),k=l.groupFooterTemplate,_=l.groupHeaderColumnTemplate;if((l.groupFooterTemplate||l.groupHeaderColumnTemplate||h.groupHeaderTemplate)&&(d=c._groupData(e,!1,!(h.groupHeaderTemplate||!v(c.columns)[0].groupHeaderColumnTemplate)&&v(c.columns)[0])),f&&!a&&(g=typeof f===Ut?f(d):xe.template(f)(d)),c._skipRerenderItemsCount?r(t,o,g):u+=_?_(We({},d,{groupCells:o,colspan:b-o,text:g})):r(t,o,g),e.hasSubgroups)for(i=0,s=m.length;i<s;i++)u+=c._groupRowHtml(m[i],a?t:t-1,o+1,r,l,a,n&&i===m.length-1);else u+=c._rowsHtml(m,l);return k&&(n?Ve(e.value,c._skippedGroups)||c._skippedGroups.push(e.value):(c._skippedGroups.length&&c._skippedGroups[0]===e.value&&c._skippedGroups.shift(),c._skipRerenderItemsCount||(u+=k(d)))),u},collapseGroup:function(t){var o,r,l,a,n,i,s=this,d=t,c=this.options.groupable,u=c.showFooter,p=u?0:1,h=e();for(t=e(t),this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?h=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(h=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),o=t.find(".k-group-cell").length,t.find(".k-i-collapse").addClass("k-i-expand").removeClass("k-i-collapse"),t.find("td[aria-expanded='true']:first").attr("aria-expanded",!1).find("a").attr(po,uo),t=t.nextAll("tr"),i=[],l=0,a=t.length;l<a&&(n=t.eq(l),r=n.find(".k-group-cell").length,n.hasClass("k-grouping-row")?p++:n.hasClass("k-group-footer")&&p--,!(r<=o||n.hasClass("k-group-footer")&&p<0));l++)h.length&&i.push(h[l]),i.push(n[0]);e(i).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(s._collapseGroupsTimeOut),s._collapseGroupsTimeOut=setTimeout(function(){s.content.scroll(),s._groupToCollapse=d}))},expandGroup:function(t){t=e(t);var o,r,l,a,n,i=this,s=i.options.groupable.showFooter,d=e(),c=[],u=1;for(this._isLocked()&&(t.closest("div").hasClass("k-grid-content-locked")?d=this.tbody.children("tr:eq("+t.index()+")").nextAll("tr"):(d=t.nextAll("tr"),t=this.lockedTable.find(">tbody>tr:eq("+t.index()+")"))),o=t.find(".k-group-cell").length,t.find(".k-i-expand").addClass("k-i-collapse").removeClass("k-i-expand"),t.find("td[aria-expanded='false']:first").attr("aria-expanded",!0).find("a").attr(po,co),t=t.nextAll("tr"),a=0,n=t.length;a<n&&(r=t.eq(a),l=r.find(".k-group-cell").length,!(l<=o));a++)l!=o+1||r.hasClass("k-detail-row")||(r.show(),d.eq(a).show(),r.hasClass("k-grouping-row")&&r.find(".k-icon").hasClass("k-i-collapse")&&i.expandGroup(r),r.hasClass("k-master-row")&&r.find(".k-icon").hasClass("k-i-collapse")&&(r.next().show(),d.eq(a+1).show())),r.hasClass("k-grouping-row")&&(s&&c.push(r.is(":visible")),u++),r.hasClass("k-group-footer")&&(s&&r.toggle(c.pop()),1==u?(r.show(),d.eq(a).show()):u--);0===o&&i.options.scrollable.endless&&this._isLocked()&&i._syncLockedContentHeight()},_updateHeader:function(t){var o=this,r=o._isLocked()?o.lockedHeader.find("thead"):o.thead,l=r.find("tr.k-filter-row").find("th.k-group-cell").length,a=r.find("tr:first").find("th.k-group-cell").length,n=r.children("tr:not(:first)").filter(function(){return!e(this).children(":visible").length});t>a?(e(Array(t-a+1).join('<th class="k-group-cell k-header" scope="col">'+o.options.messages.expandCollapseColumnHeader+"</th>")).prependTo(r.children("tr:not(.k-filter-row)")),o.element.is(":visible")&&n.find("th.k-group-cell").hide()):t<a&&r.find("tr").each(function(){e(this).find("th.k-group-cell").filter(":eq("+t+"),:gt("+t+")").remove()}),t>l&&e(Array(t-l+1).join('<th class="k-group-cell k-header" scope="col">&nbsp;</th>')).prependTo(r.find(".k-filter-row"))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t,o=this;o._isLocked()&&(t=e(">.k-grid-footer>.k-grid-footer-wrap>table",o.wrapper).add(o.thead.parent()).add(o.table),o._footerWidth=ce(t.eq(0)),t.width(o._footerWidth),t=e(">.k-grid-footer>.k-grid-footer-locked>table",o.wrapper).add(o.lockedHeader.find(">table")).add(o.lockedTable),t.width(ce(t.eq(0))))},hideColumn:function(o){var r,l,a,n,s,d,c,u,p,h,f,g=this,m=0,k=g.footer||g.wrapper.find(".k-grid-footer"),w=g.columns,C=g.lockedHeader?$(g.lockedHeader.find(">table>thead")).filter(b).length:0,y=Pe(U(g.columns),function(e){return e.groupHeaderColumnTemplate});if(o="number"==typeof o?w[o]:Ae(o)?Pe(D(w),function(e){return e===o})[0]:Pe(D(w),function(e){return e.field===o})[0],o&&_(o)){if(h=g._columnVisibilitySetter(o),o.columns&&o.columns.length){for(d=M(o,w),h(o,!1),le(i(e(">table>thead",g.lockedHeader),g.thead,">tr:eq("+d.row+")>th"),d.cell,!1),a=0;a<o.columns.length;a++)this.hideColumn(o.columns[a]);return g.trigger(vt,{column:o}),t}if(p=Ve(o,v(U(w))),h(o,!1),g._setParentsVisibility(o,!1),g._templates(),g._updateCols(),g._updateLockedCols(),f=g.thead,c=p,g.lockedHeader&&C>p?f=g.lockedHeader.find(">table>thead"):c-=C,r=$(f).filter(b).eq(c),r[0].style.display="none",le(i(e(">table>thead",g.lockedHeader),g.thead,">tr.k-filter-row>th"),p,!1),k[0]&&(g._updateCols(k.find(">.k-grid-footer-wrap>table")),g._updateLockedCols(k.find(">.k-grid-footer-locked>table")),le(k.find(".k-footer-template>td"),p,!1)),g.lockedTable&&C>p?ae(g.lockedTable.find(">tbody>tr"),p):ae(g.tbody.children(),p-C),g.lockedTable)g._updateTablesWidth(),g._applyLockedContainersWidth(),g._syncLockedContentHeight(),g._syncLockedHeaderHeight(),g._syncLockedFooterHeight();else{for(n=g.thead.prev().find("col"),a=0,u=n.length;a<u;a+=1){if(s=n[a].style.width,!s||s.indexOf("%")!=-1){m=0;break}m+=parseInt(s,10)}l=e(">.k-grid-header table:first,>.k-grid-footer table:first",g.wrapper).add(g.table),g._footerWidth=null,m&&(l.each(function(){this.style.width=m+"px"}),g._footerWidth=m),Co.msie&&8==Co.version&&(l.css("display","inline-table"),setTimeout(function(){l.css("display","table")},1))}g._updateFirstColumnClass(),y.length>0&&g._renderGroupRows(),g.trigger(vt,{column:o})}},_setParentsVisibility:function(t,o){var r,l,a,n,s,d=this,c=d.columns,p=[],h=d._columnVisibilitySetter(t),f=o?function(e){return v(e.columns).length&&e.hidden}:function(e){return!v(e.columns).length&&!e.hidden};if(u(t,c,p)&&p.length)for(r=p.length-1;r>=0;r--)l=p[r],a=I(l,c),n=i(e(">table>thead",this.lockedHeader),this.thead,">tr:eq("+a.row+")>th:not(.k-group-cell):not(.k-hierarchy-cell)").eq(a.cell),f(l)&&(h(l,o),n[0].style.display=o?"":"none"),n.filter("["+xe.attr("colspan")+"]").length&&(s=parseInt(n.attr(xe.attr("colspan")),10),n[0].colSpan=s-A(l.columns)||1)},showColumn:function(o){var r,l,a,n,s,d,c,u,p,h,f,g,m,b,k=this,v=k.columns,w=k.footer||k.wrapper.find(".k-grid-footer"),C=k.lockedHeader?$(k.lockedHeader.find(">table>thead")).length:0,y=Pe(U(k.columns),function(e){return e.groupHeaderColumnTemplate});if("number"==typeof o?(h=o,o=v[o]):Ae(o)?e.each(D(v),function(e,t){if(t===o)return o=t,h=e,!1}):e.each(D(v),function(e,t){if(t.field===o)return o=t,h=e,!1}),o&&!_(o)){if(m=k._columnVisibilitySetter(o),o.columns&&o.columns.length){for(c=I(o,v),f=D(k.options.columns)[h],m(o,!0),le(i(e(">table>thead",k.lockedHeader),k.thead,">tr:eq("+c.row+")>th"),c.cell,!0),r=0;r<o.columns.length;r++)f.columns[r].hidden||this.showColumn(o.columns[r]);return k.trigger(wt,{column:o}),t}if(g=Ve(o,U(v)),m(o,!0),k._setParentsVisibility(o,!0),k._templates(),k._updateCols(),k._updateLockedCols(),b=k.thead,d=g,k.lockedHeader&&C>g?b=k.lockedHeader.find(">table>thead"):d-=C,a=$(b).eq(d),a[0].style.display="",le(i(e(">table>thead",k.lockedHeader),k.thead,">tr.k-filter-row>th"),g,!0),w[0]&&(k._updateCols(w.find(">.k-grid-footer-wrap>table")),k._updateLockedCols(w.find(">.k-grid-footer-locked>table")),le(w.find(".k-footer-template>td"),g,!0)),k.lockedTable&&C>g?se(k.lockedTable.find(">tbody>tr"),g):se(k.tbody.children(),g-C),k.lockedTable)k._updateTablesWidth(),k._applyLockedContainersWidth(),k._syncLockedContentHeight(),k._syncLockedHeaderHeight();else if(n=e(">.k-grid-header table:first,>.k-grid-footer table:first",k.wrapper).add(k.table),o.width){for(s=0,p=k.thead.prev().find("col"),r=0,l=p.length;r<l;r+=1){if(u=p[r].style.width,u.indexOf("%")>-1){s=0;break}s+=parseInt(u,10)}k._footerWidth=null,s&&(n.each(function(){this.style.width=s+"px"}),k._footerWidth=s)}else n.width("");k._updateFirstColumnClass(),y.length>0&&k._renderGroupRows(),k.trigger(wt,{column:o})}},_columnVisibilitySetter:function(e){var t=e||{};return C(t.media)?p:f},_progress:function(e){var t=this.element,o=this.options.scrollable&&this.options.scrollable.endless;this._editContainer&&"popup"===this._editMode()?t=this._editContainer:this.lockedContent||o?t=this.wrapper:this.element.is("table")?t=this.element.parent():this.content&&this.content.length&&(t=this.content),o&&e?xe.ui.progress(t,e,{height:this.content.height(),top:this.content[0].offsetTop,opacity:!0}):xe.ui.progress(t,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&(this.lockedContent[0].scrollTop=this.content[0].scrollTop),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t)},_isActiveInTable:function(){var t=Ee();return!!t&&(this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)))},refresh:function(t){var o,r,l,a=this,n=a.dataSource.view(),i=a.options.navigatable,s=e(a.current()),d=!1,c=(a.dataSource.group()||[]).length,u=c+j(v(a.columns)).length;t&&"itemchange"===t.action&&(a.editable||a.options.scrollable.endless)&&("popup"!=this._editMode()||"popup"===this._editMode()&&!a._editableIsClosing)||(t&&"remove"===t.action&&a.editable&&a.editable.options.model&&Ve(a.editable.options.model,t.items)>-1&&a.editable.options.model.unbind(_t,a._modelChangeHandler),t=t||{},a.trigger("dataBinding",{action:t.action||"rebind",index:t.index,items:t.items})||(t.action===zt&&a._isVirtualEditable()&&(a._destroyEditable(),a._clearEditableState()),a._angularItems("cleanup"),a._endlessFetchInProgress||(i&&(a._isActiveInTable()||a._editContainer&&a._editContainer.data("kendoWindow"))&&(d=s.is("th"),o=d?s.parent().children(":not(.k-group-cell)").index(s[0]):Math.max(a.cellIndex(s),0)),a._destroyEditable()),a.options.scrollable&&a.options.scrollable.endless?(clearTimeout(a._progressTimeOut),a._progressTimeOut=setTimeout(function(){a._endlessFetchInProgress||a._progress(!1)},100)):a._progress(!1),a._hideResizeHandle(),a._data=[],a.columns.length||(a._autoColumns(a._firstDataItem(n[0],c)),u=c+a.columns.length),a._group=c>0||a._group,a._group&&(a._templates(),a._updateCols(),a._updateLockedCols(),a._updateHeader(c),a._group=c>0,a._groupRows=ne(n)),a.content&&(r=a.content.scrollLeft()),l=a._skipRerenderItemsCount,a._renderContent(n,u,c),a.options.scrollable&&a.options.scrollable.endless&&this.lockedContent&&(a._skipRerenderItemsCount=l),a._renderLockedContent(n,u,c),a._footer(),a._renderNoRecordsContent(),a._togglePagerVisibility(),a._setContentHeight(),a._setContentWidth(a.content&&r),a.lockedTable&&(a.options.scrollable.virtual?a.content.find(">.k-virtual-scrollable-wrap").trigger("scroll"):a.touchScroller?a.touchScroller.movable.trigger("change"):(a.wrapper.one("scroll",function(e){e.stopPropagation()}),a.content.trigger("scroll"))),a._endlessFetchInProgress||a._restoreCurrent(o,d),a.touchScroller&&a.touchScroller.contentResized(),a.selectable&&a.selectable.resetTouchEvents(),a._muteAngularRebind(function(){a._angularItems("compile")}),a._checkBoxSelection&&a._toggleHeaderCheckState(!1),a.options.persistSelection&&(a.selectable&&!xe.ui.Selectable.parseOptions(a.options.selectable).cell||a._checkBoxSelection)?a._restoreSelection():a._selectedIds={},a.trigger(yt)))},_restoreCurrent:function(o,r){var l,a,n;o===t||o<0||(this._removeCurrent(),r?this._setCurrent(this.thead.find("th:not(.k-group-cell)").eq(o)):(l=0,this._rowVirtualIndex?l=this.virtualScrollable.position(this._rowVirtualIndex):o=0,a=e(),this.lockedTable&&(a=this.lockedTable.find(">tbody>tr").eq(l)),a=a.add(this.tbody.children().eq(l)),n=a.find(">td:not(.k-group-cell):not(.k-hierarchy-cell)").eq(o),this._setCurrent(n)),this._current&&fe(this._current.closest("table")[0],!0))},_restoreSelection:function(){var e,t=this,o=t.items(),r=Ge(t.dataSource.options.schema.model)?t.dataSource.options.schema.model.fn.idField:t.dataSource.options.schema.model.id;e=Pe(o,function(e){var o=t.dataItem(e)[r];if(t._selectedIds[o])return e}),t.select(e)},_angularItems:function(e){xe.ui.DataBoundWidget.fn._angularItems.call(this,e),"cleanup"!==e||this.dataSource&&this.dataSource.options.endless||this._cleanupDetailItems(),this._angularGroupItems(e),this._angularGroupFooterItems(e)},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&(e.angular("cleanup",function(){return{elements:e.tbody.children(".k-detail-row")}}),e.tbody.find(".k-detail-cell").empty())},_angularGroupItems:function(t){var o=this,r=o.tbody;o.lockedContent&&(r=o.lockedTable.find("tbody")),o._group&&o.angular(t,function(){return{elements:r.children(".k-grouping-row"),data:e.map(ne(o.dataSource.view()),function(e){return{dataItem:e}})}})},_angularGroupFooterItems:function(t){var o=this,r=o.tbody;o.lockedContent&&(r=o.element),o._group&&o.groupFooterTemplate&&o.angular(t,function(){return{elements:r.find(".k-group-footer"),data:e.map(ie(o.dataSource.view()),function(e){return{dataItem:e}})}})},_renderContent:function(e,t,o){var r,l,a,n,i=this,s="",d=null!=i.lockedContent,c=null,u=i.options.scrollable,p={rowTemplate:i.rowTemplate,altRowTemplate:i.altRowTemplate,groupFooterTemplate:i.groupFooterTemplate,groupHeaderColumnTemplate:i.groupHeaderColumnTemplate};if(u&&u.endless&&!i.dataSource.options.endless&&(i._skipRerenderItemsCount=0,i.content&&(i.content[0].scrollTop=0)),c=i._skipRerenderItemsCount>0,t=d?t-j(K(i.columns)).length:t,o>0)for(t=d?t-o:t,i.detailTemplate&&t++,i.groupFooterTemplate&&(i._groupAggregatesDefaultObject=i.dataSource.aggregates()),i.options.scrollable.endless&&(n=i.dataSource.flatView().length),r=0,l=e.length;r<l;r++)i._skippedGroups||(i._skippedGroups=[]),a=n&&r===e.length-1&&n!==i.dataSource.total(),s+=i._groupRowHtml(e[r],t,0,d?Te:Se,p,d,a);else s+=i._rowsHtml(e,p);c?(i.tbody.append(s),clearTimeout(i._endlessFetchTimeOut),i._endlessFetchTimeOut=setTimeout(function(){i._groupToCollapse&&(i.collapseGroup(i._groupToCollapse),i._groupToCollapse=null)}),i._endlessFetchInProgress=null):i.tbody=Y(i.tbody,i.table,s,this.options.$angular)},_renderGroupRows:function(){var t,o,r,l,a,n,i,s,d,c,u,p,h,f,g,m,b,k=this,_=k._groupRows,w=k.wrapper.find(".k-grouping-row"),C=k._groups(),y=null!=k.lockedContent;w.each(function(w,S){f=e(S),c=f.closest("table").parent(),u=c.is("."+it),o=j(u?v(O(k.columns)):v(N(k.columns))),g=f.find("."+st).length,y?(t=u?Se:Te,r=u?o.length+C-g:o.length):(t=Se,r=o.length+C-g),l=w>=_.length?_[w-_.length]:_[w],a=l.field,n=Pe(U(k.columns),function(e){return e.field==a})[0]||{},b=!(n.groupHeaderTemplate||!v(k.columns)[0].groupHeaderColumnTemplate)&&v(k.columns)[0],i=n.groupHeaderTemplate?n.groupHeaderTemplate:v(k.columns)[0].groupHeaderColumnTemplate,s=(n.title||a)+": "+re(l.value,n.format,n.values,n.encoded),C=C,d=k._groupData(l,!1,b),m=u?k.lockedGroupHeaderColumnTemplate:k.groupHeaderColumnTemplate,i&&(s=typeof i===Ut?i(d):xe.template(i)(d)),p=f.prev().length?f.prev():f.parent(),h=e(m?m(We({},d,{groupCells:g,colspan:C-g,text:s})):t(r,g,s)),p.is("tbody")?p.prepend(h):p.after(h),f.remove()})},_renderLockedContent:function(e,t,o){var r,l,a,n="",i=null,s={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){if(a=this.lockedTable,i=this._skipRerenderItemsCount>0,o>0)for(t-=v(U(N(this.columns))).length,r=0,l=e.length;r<l;r++)n+=this._groupRowHtml(e[r],t,0,Se,s,!1,this.options.scrollable.endless&&r===e.length-1);else n=this._rowsHtml(e,s);i?a.children("tbody").append(n):Y(a.children("tbody"),a,n,this.options.$angular),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){this.options.pageable.alwaysVisible===!1&&this.wrapper.find(".k-grid-pager").toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var o,r,l,a,n=e[0].rows,i=n.length,s=t[0].rows,d=e.add(t),c=d.length,u=[];for(o=0;o<i&&s[o];o++)n[o].style.height&&(n[o].style.height=s[o].style.height="");for(o=0;o<i&&s[o];o++)r=n[o].offsetHeight,l=s[o].offsetHeight,a=0,r>l?a=r:r<l&&(a=l),u.push(a);for(o=0;o<c;o++)d[o].style.display="none";for(o=0;o<i;o++)u[o]&&(n[o].style.height=s[o].style.height=u[o]+1+"px");for(o=0;o<c;o++)d[o].style.display=""}});xe.ExcelMixin&&xe.ExcelMixin.extend(Io.prototype),xe.PDFMixin&&(xe.PDFMixin.extend(Io.prototype),Io.prototype._drawPDF_autoPageBreak=function(o){function r(){u&&i!==t?(c.one("change",l),c.page(i)):(s.refresh(),l())}function l(){h.appendTo(document.body);var t=e.extend({},s.options.pdf,{_destructive:!0,progress:function(e){o.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});xe.drawing.drawDOM(f,t).always(function(){h.remove()}).then(function(e){d.resolve(e)}).fail(function(e){d.reject(e)})}function a(){var e=c.page(),t=u?c.totalPages():1;n.append(p.find("tr")),e<t?c.page(e+1):(c.unbind("change",a),r())}var n,i,s=this,d=new e.Deferred,c=s.dataSource,u=s.options.pdf.allPages,p=s.wrapper.find('table[role$="grid"] > tbody'),h=e("<div>").css({position:"absolute",left:-1e4,top:-1e4}),f=s.wrapper.clone().css({height:"auto",width:"auto"}).appendTo(h);return f.find(".k-grid-content").css({height:"auto",width:"auto",overflow:"visible"}),f.find('table[role$="grid"], .k-grid-footer table').css({height:"auto",width:"100%",overflow:"visible"}),f.find(".k-grid-pager, .k-grid-toolbar, .k-grouping-header").remove(),f.find(".k-grid-header, .k-grid-footer").css({paddingRight:0}),this._initPDFProgress(o),n=f.find('table[role$="grid"] > tbody').empty(),i=c.page(),u?(c.bind("change",a),c.page(1)):a(),d.promise()},Io.prototype._drawPDF=function(o){function r(){i&&d!==t?(n.unbind("change",l),n.one("change",function(){a.resolve(s)}),n.page(d)):a.resolve(s)}function l(){c._drawPDFShadow({width:c.wrapper.width()},{avoidLinks:c.options.pdf.avoidLinks}).done(function(e){var t=n.page(),l=i?n.totalPages():1,a={page:e,pageNumber:t,progress:t/l,totalPages:l};o.notify(a),s.append(a.page),t<l?n.page(t+1):r()}).fail(function(e){a.reject(e)})}var a,n,i,s,d,c=this;return c.options.pdf.paperSize&&"auto"!=c.options.pdf.paperSize?c._drawPDF_autoPageBreak(o):(a=new e.Deferred,n=c.dataSource,i=c.options.pdf.allPages,this._initPDFProgress(o),s=new xe.drawing.Group,d=n.page(),i?(n.bind("change",l),n.page(1)):l(),a.promise())},Io.prototype._initPDFProgress=function(t){var o,r=e("<div class='k-loading-pdf-mask'><div class='k-loading-color'/></div>");r.prepend(this.wrapper.clone().css({position:"absolute",top:0,left:0})),this.wrapper.append(r),o=e("<div class='k-loading-pdf-progress'>").appendTo(r).kendoProgressBar({type:"chunk",chunkCount:10,min:0,max:1,value:0}).data("kendoProgressBar"),t.progress(function(e){o.value(e.progress)}).always(function(){xe.destroy(r),r.remove()})}),He.plugin(Io),He.plugin(Ho)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t,o){(o||t)()});
//# sourceMappingURL=kendo.grid.min.js.map
