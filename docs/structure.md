
# Таблицы и поля, описывающие структуру бэкенда

## Таблица APP_SETTINGS


Таблица пользовательских настроек в формате ключ-значение уровня БД


#### KEY

Ключ

#### VALUE

Значение

## Таблица BACKEND_ACTION


Хранит информацию о действиях, реализованных в бэкенде QP8


#### ID

Идентификатор действия. Генерируется автоматически

#### TYPE_ID

Идентификатор типа действия (Таблица ACTION_TYPE)

#### ENTITY_TYPE_ID

Идентификатор типа сущности ([Таблица ENTITY_TYPE](#таблица-entity_type))

#### NAME

Уникальное имя действия

#### SHORT_NAME

Краткое имя действия (неуникальное)

#### CODE

Уникальный код действия

#### USER_CONTROL_FILE

Не используется

#### CONTROLLER_ACTION_URL

Вызываемый URL к действию контроллера

#### CONFIRM_PHRASE

Фраза подтверждения действия

#### TAB_ID

Родительская вкладка (не используется)

#### PARENT_ID

Идентификатор родительского действия (ссылка на эту же таблицу)

#### IS_INTERFACE

Является, ли действие интерфейсным?

#### HAS_PRE_ACTION

Имеется ли предварительное действие?

#### IS_WINDOW

Выполняется ли интерфейсное действие в окне или в табе?

#### WINDOW_WIDTH

Ширина окна

#### WINDOW_HEIGHT

Высота окна

#### DEFAULT_VIEW_TYPE_ID

Идентификатор вида по умолчанию, если виды определены для данного действия (Таблица ACTION_VIEW)

#### ALLOW_SEARCH

Разрешен ли поиск

#### ALLOW_PREVIEW

Не используется

#### NEXT_SUCCESSFUL_ACTION_ID

Ссылка на следующее действие при успешном выполнении текущего

#### NEXT_FAILED_ACTION_ID

Ссылка на следующее действие при неуспешном выполнении текущего

#### IS_CUSTOM

Является ли действие пользовательским или встроенным?

#### IS_MULTISTEP

Является ли действие многошаговым?

#### HAS_SETTINGS

Вызывается ли для действия предварительный SetUp?

#### ADDITIONAL_CONTROLLER_ACTION_URL

Вызываемый URL к действию контроллера (при превышении ENTITY_LIMIT). Вызовы происходят пошагово. Разбиение на шаги проводится в соответствии с ENTITY_LIMIT.

#### ENTITY_LIMIT

Параметр, определяющий, как выполнять неинтерфейсное действие: пошагово или за один вызов. При пошаговом вызове также определяет размер шага.

## Таблица ACTION_CONTENT_BIND


Хранит привязку пользовательских действий к контентам


#### CUSTOM_ACTION_ID

Идентификатор пользовательского действия ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### CONTENT_ID

Идентификатор контента ([Таблица CONTENT](#таблица-content))

## Таблица ACTION_SITE_BIND


Хранит привязку пользовательских действий к сайтам


#### CUSTOM_ACTION_ID

Идентификатор пользовательского действия ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### SITE_ID

Идентификатор сайта ([Таблица SITE](#таблица-site))

## Таблица ACTION_TOOLBAR_BUTTON


Хранит информацию о кнопках панели инструментов


#### PARENT_ACTION_ID

Идентификатор родительского действия ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### ACTION_ID

Идентификатор действия, которое реализуется кнопкой ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### NAME

Имя кнопки

#### ORDER

Порядок кнопки в рамках текущей панели инструментов

#### ICON

Иконка кнопки

#### ICON_DISABLED

Не используется

#### IS_COMMAND

Не используется

## Таблица ACTION_TYPE


Хранит информацию о типах действий, реализованных в бэкенде QP8


#### ID

Идентификатор типа действия

#### NAME

Имя типа действия

#### CODE

Код типа действия

#### REQUIRED_PERMISSION_LEVEL_ID

Идентификатор уровня доступа, необходимый для выполнения действия этого типа([Таблица PERMISSION_LEVEL](#таблица-permission_level))

#### ITEMS_AFFECTED

Число элементов, необходимых для выполнения действия этого типа. Возможные значения – 0,1,2,255 (неограниченно).

## Таблица ACTION_VIEW


Хранит информацию о представлениях интерфейсных действий


#### ACTION_ID

Идентификатор действия ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### TYPE_ID

Идентификатор типа представления (Таблица VIEW_TYPE)

#### ORDER

Порядок представления (в рамках текущего действия)

#### CONTROLLER_ACTION_URL

URL представления

#### PREVENT_DEFAULT_BEHAVIOR

Переключение представления обрабатывается на клиенте

## Таблица ACTION_EXCLUSIONS


Хранит информацию о пользовательских действиях, которые исключают стандартные


#### EXCLUDED_BY_ID

ID пользовательского действия ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### EXCLUDES_ID

ID стандартного (исключаемого) действия ([Таблица BACKEND_ACTION](#таблица-backend_action))

## Таблица BUTTONS


Хранит информацию о кнопках QP7 (не используется в QP8)


#### PERMISSION_LEVEL_ID

Идентификатор уровня доступа, необходимый для показа кнопки ([Таблица PERMISSION_LEVEL](#таблица-permission_level))

#### BUTTON_ID

Идентификатор кнопки

#### BUTTON_TYPE

Тип кнопки (HTML)

#### ACTION_FILE

Относительный URL к файлу действия

#### BUTTONS_ORDER

Порядок

#### CANCEL_ACTION

Является ли кнопкой отмены?

#### BUTTON_NAME

Название кнопки

#### ACTION_TAB_ID

Вкладка, на которую осуществляется переход после выполнения действия ([Таблица TABS](#таблица-tabs))

#### LOCATION_TAB_ID

Вкладка, на которой расположена кнопка ([Таблица TABS](#таблица-tabs))

#### CONFIRM_PHRASE

Фраза подтверждения

#### rs_check_file

Файл, содержащий AJAX-проверку

#### rs_check_function

Функция AJAX-проверки

#### hide_for_modal

Скрывать в режиме модального окна

#### show_for_modal

Показывать только в режиме модального окна

## Таблица CONTENT_TAB_BIND


Используется только в QP7. Хранит данные о привязке пользовательских вкладок к контентам, для реализации функционала показа/скрытия пользовательских вкладок для определенных контентов.


#### CONTENT_ID

Идентификатор контента ([Таблица CONTENT](#таблица-content))

#### TAB_ID

Идентификатор пользовательской вкладки ([Таблица TABS](#таблица-tabs))

## Таблица CONTEXT_MENU


Хранит информацию о контекстных меню QP8


#### ID

Идентификатор контекстного меню

#### CODE

Код контекстного меню

## Таблица CONTEXT_MENU_ITEM


Хранит информацию о пунктах контекстных меню QP8


#### CONTEXT_MENU_ID

Идентификатор родительского контекстного меню ([Таблица CONTEXT_MENU](#таблица-context_menu))

#### ACTION_ID

Идентификатор действия ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### NAME

Имя пункта меню

#### ORDER

Порядок (в рамках текущего контекстного меню)

#### ICON

Иконка

#### ICON_DISABLED

Не используется

#### BOTTOM_SEPARATOR

После элемента вставляется разделитель

## Таблица CUSTOM_ACTIONS


Хранит информацию о пользовательских действиях


#### ID

Идентификатор пользовательского действия

#### ACTION_ID

Идентификатор действия ([Таблица BACKEND_ACTION](#таблица-backend_action)), созданного на основе пользовательского

#### NAME

Имя действия

#### URL

URL действия

#### ICON_URL

URL иконки

#### ORDER

Порядок действия

#### SITE_EXCLUDED

Переключатель режима (выбранные/кроме выбранных) для сайтов

#### CONTENT_EXCLUDED

Переключатель режима (выбранные/кроме выбранных) для контентов

#### SHOW_IN_MENU

Показывать в контекстном меню?

#### SHOW_IN_TOOLBAR

Показывать на панели инструментов

#### CREATED

Дата создания. Генерируется автоматически

#### MODIFIED­

Дата последнего изменения. Генерируется и изменяется автоматически.

#### LAST_MODIFIED_BY

ID последнего пользователя ([Таблица USERS](#таблица-users)), менявшего настройки

#### DESCRIPTION

Описание действия

#### ALIAS

Псевдоним действия

## Таблица DB


Хранит настройки QP8 уровня БД (единственная запись)


#### ID

Идентификатор

#### RECORD_ACTIONS

Записывать ли действия?

#### SINGLE_USER_ID

Зарезеривировано

#### fp_settings

Настройки вычисления FingerPrint при записи действий

#### USE_AD_SYNC_SERVICE

Включить сервис синхронизации пользователей с ActiveDirectory?

#### AUTO_OPEN_HOME

Автоматически открывать страницу Home

#### CREATED

Дата создания. Генерируется автоматически

#### MODIFIED­

Дата последнего изменения. Генерируется и изменяется автоматически.

#### LAST_MODIFIED_BY

ID последнего пользователя ([Таблица USERS](#таблица-users)), менявшего настройки

#### USE_DPC

Использовать функциональность DPC (в мультитенантном варианте)

#### USE_CDC

Использовать сихнронизацию через CDC (только для SQL Server)

#### USE_TOKENS

Использовать авторизацию через токены ([см. Таблица ACCESS_TOKEN](#таблица-access_token))

## Таблица ENTITY_TYPE


Хранит информацию о типах сущностей QP8


#### ID

Идентификатор типа

#### NAME

Имя типа

#### CODE

Код типа

#### PARENT_ID

Идентификатор родительского типа

#### ORDER

Порядок

#### SOURCE

Таблица БД, в которой хранятся сущности

#### SOURCE_SP

Дополнительная хранимая процедура, используемая для получения сущностей

#### ID_FIELD

Имя поля идентификатора в таблице БД

#### TITLE_FIELD

Имя поля заголовка в таблице БД

#### ORDER_FIELD

Имя поля сортировки в таблице БД

#### PARENT_ID_FIELD

Имя поля ссылки на родительскую сущность в таблице БД

#### FOLDER_ICON

Неиспользуется

#### ICON_MODIFIER_FIELD

Имя поля-модификатора для базовой иконки (часть имени)

#### ICON_FIELD

Имя поля иконки в таблице БД

#### HAS_ITEM_NODES

Имеются ли одиночные элементы данного типа в дереве?

#### RECURRING_ID_FIELD

Имя иерархического поля в таблице БД

#### DEFAULT_ACTION_ID

Идентификатор действия по умолчанию для сущности данного типа ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### FOLDER_DEFAULT_ACTION_ID

Идентификатор действия по умолчанию для папки сущностей данного типа ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### CONTEXT_MENU_ID

Идентификатор контекстного меню для сущности данного типа ([Таблица CONTEXT_MENU](#таблица-context_menu))

#### FOLDER_CONTEXT_MENU_ID

Идентификатор действия по умолчанию для папки сущностей данного типа ([Таблица CONTEXT_MENU](#таблица-context_menu))

#### TAB_ID

Идентификатор вкладки QP7. Использовалось для миграции прав доступа.

#### DISABLED

Не отображается в дереве бэкенда

#### CANCEL_ACTION_ID

Идентификатор действия отмены редактирования (используется для снятия автоблокировки) ([Таблица BACKEND_ACTION](#таблица-backend_action))

#### CONTEXT_NAME

Имя переменной контекста (используется для интеграции)

#### ACTION_PERMISSION_ENABLE

Можно раздавать права доступа на действия данного с сущностями данного типа

#### GROUP_PARENT_ID

Идентификатор группирующего типа

#### GROUP_PARENT_ID_FIELD

Имя поля ссылки на группирующую сущность в таблице БД

## Таблица LANGUAGES


Хранит информацию о языках, использующихся в бэкенде


#### LANGUAGE_ID

Идентификатор языка

#### LANGUAGE_NAME

Название языка

#### LANGUAGE_PT

Не используется

#### LOCALE

ID локали

#### CODEPAGE

ID кодовой страницы

#### CHARSET

Название кодировки

#### general_date_format

Форматдаты (общий)

#### long_date_format

Форматдаты (полный)

#### short_date_format

Форматдаты (краткий)

#### long_time_format

Формат времени (общий)

#### short_time_format

Формат времени (краткий)

#### Direction

Направление (RTL/LTR)

#### iso_code

ISO-код языка

## Таблица PHRASES


Хранит информацию о фразах (строковых ресурсах, подлежащих переводу)


#### PHRASE_ID

Идентификатор фразы

#### PHRASE_TEXT

Текст фразы

### Триггеры

#### ti_translatiuons

При добавлении новой фразы, автоматически создаются записи для переводов этой фразы

## Таблица TRANSLATIONS


Хранит переводы фраз


#### PHRASE_ID

Идентификатор фразы (Таблица PHRASES)

#### LANGUAGE_ID

Идентификатор языка (Таблица LANGUAGES)

#### PHRASE_TRANSLATION

Текст перевода

## Таблица SYSTEM_INFO


Хранит информацию о фиксах БД, которые были применены. Определяет текущую версию БД


#### field_name

Тип фикса

#### field_value

Номер фикса

#### Copyright

Строкакопирайта

## Таблица SYSTEM_STATUS_TYPE


Справочник системных статусов статей (используется для аудита)


#### ID

Идентификатор системного статуса

#### NAME

Имя

#### DESCRIPTION

Описание

#### DISABLE_CLEAR

Недоступен для очистки (QP7)

## Таблица TABS


Хранит информацию о вкладках QP7


#### TAB_NAME

Имя вкладки

#### TAB_ID

Идентификатор вкладки

#### TAB_FILE

Имя выполняемого файла

#### TAB_GROUP

Группа вкладки (сценарий использования)

#### TABS_ORDER

Порядок вкладки (в рамках родительской)

#### DESCRIPTION

Описание

#### PARENT_TAB_ID

Идентификатор родительской вкладки ([Таблица TABS](#таблица-tabs))

#### PRE_ACTION

Файл предварительного действия

#### POST_ACTION

Файл последействия

#### show_in_tree_list

Показывать в дереве на уровне списка

#### hide_in_tree

Скрывать в дереве

#### tree_keyword

Внутреннее имя, использующееся для формирования дерева

#### NAV_TABLE

Имя таблицы БД, используемой для формирования дерева

#### NAV_DICTIONARY

Имя переменной, из которой берется информация о контексте

#### NAV_ITEM_ID

Имя поля идентификатора

#### NAV_ITEM_NAME

Имя поля заголовка

#### hide_for_single_user

Скрывать в режиме Single-User (определяется лицензией)

#### custom_tab

Пользовательская вкладка?

#### custom_url

URL пользовательской вкладки

#### EXCLUDED

Выбор режима (только на выбранных сайтах или контентах / кроме выбранных сайтов или контентов)

## Таблица TODAY_PANELS


Хранит информацию о панелях на странице Home в QP7


#### panel_name

Название панели

#### panel_id

Идентификатор панели

#### panel_file

Файл с кодом панели

#### panel_block_no

Номер блока размещения (по умолчанию)

#### panel_order

Порядок панели в блоке (по умолчанию)

#### panel_height

Высота панели (по умолчанию)

#### icon_file_name

Иконка панели

#### Necessary

Является ли панель обязательной?

## Таблица TOOLBAR_BUTTONS


Хранит информацию о кнопках панели инструментов QP7


#### PERMISSION_LEVEL_ID

Требуемый уровень доступа ([Таблица PERMISSION_LEVEL](#таблица-permission_level))

#### TBUTTON_ID

Идентификатор

#### LOCATION_TAB_ID

Идентификатор родительской вкладки ([Таблица TABS](#таблица-tabs))

#### IMAGE_DISABLED

Иконка в неактивном состоянии

#### IMAGE_ENABLED

Иконка в активном состоянии

#### BUTTON_NAME

Имя кнопки

#### ACTION_FILE

Файл с действием, которое выполняется при нажатии на кнопку

#### BUTTONS_ORDER

Порядок в рамках текущей вкладки

#### ACTION_TAB_ID

Вкладка, на которую будет осуществлен переход после успешного выполнения действия ([Таблица TABS](#таблица-tabs))

#### ALWAYS_ENABLED

Доступна всегда, вне зависимости от текущего selection

#### ACTION_FUNCTION

JS-функция, которая вызывается при нажатии на кнопку

#### check_local_form

Выполнять ли клиентскую валидацию перед выполнением?

#### rs_check_file

Файл, в котором задается AJAX-действие перед выполнением

#### rs_check_function

AJAX-функция, вызываемая перед выполнением

#### CHECK_ON_LOAD

Выполнять AJAX-проверку при загрузке?

#### hide_for_modal

Скрывать в режиме модального окна

#### show_for_modal

Показывать только в режиме модального окна

#### hide_for_single_user

Скрывать в Single-User режиме (задается лицензией)

## Таблица VE_COMMAND


Хранит информацию о командах визуального редактора


#### ID

Идентификатор команды

#### NAME

Имя команды

#### ALIAS

Внутреннее имя команды

#### ROW_ORDER

1 уровень в определении порядка команды на панели инструментов визуального редактора

#### TOOLBAR_IN_ROW_ORDER

2 уровень в определении порядка команды на панели инструментов визуального редактора

#### GROUP_IN_TOOLBAR_ORDER

3 уровень в определении порядка команды на панели инструментов визуального редактора

#### COMMAND_IN_GROUP_ORDER

4 уровень в определении порядка команды на панели инструментов визуального редактора

#### ON

Включена по умолчанию?

#### PLUGIN_ID

Идентификатор плагина, создавшего команду ([Таблица VE_PLUGIN](#таблица-ve_plugin))

#### CREATED

Дата создания. Генерируется автоматически

#### MODIFIED­

Дата последнего изменения. Генерируется и изменяется автоматически.

#### LAST_MODIFIED_BY

ID последнего пользователя ([Таблица USERS](#таблица-users)), менявшего настройки

## Таблица VE_COMMAND_FIELD_BIND


Хранит привязку команд визуального редактора к полям (перекрывает настройки уровня сайта)


#### COMMAND_ID

Идентификатор команды визуального редактора ([Таблица VE_COMMAND](#таблица-ve_command))

#### FIELD_ID

Идентификатор поля ([Таблица CONTENT_ATTRIBUTE](#таблица-content_attribute))

#### ON

Команда используется/не используется

## Таблица VE_COMMAND_SITE_BIND


Хранит привязку команд визуального редактора к сайтам


#### COMMAND_ID

Идентификатор команды визуального редактора ([Таблица VE_COMMAND](#таблица-ve_command))

#### SITE_ID

Идентификатор сайта ([Таблица SITE](#таблица-site))

#### ON

Команда используется/не используется

## Таблица VE_PLUGIN


Хранит информацию о плагинах визуального редактора


#### ID

Идентификатор плагина

#### NAME

Имя плагина (должно соответствовать внутреннему имени плагина)

#### DESCRIPTION

Описание плагина

#### URL

URL, по которому лежит файл plugin.js

#### ORDER

Порядок плагина

#### CREATED

Дата создания. Генерируется автоматически

#### MODIFIED­

Дата последнего изменения. Генерируется и изменяется автоматически.

#### LAST_MODIFIED_BY

ID последнего пользователя ([Таблица USERS](#таблица-users)), менявшего настройки

## Таблица VE_STYLE


Хранит информацию о стилях визуального редактора


#### ID

Идентификатор стиля

#### NAME

Имя стиля

#### DESCRIPTION

Описание стиля

#### TAG

Используется HTML-тег

#### ORDER

#### OVERRIDES_TAG

Заменяет HTML-тег

#### IS_FORMAT

Является форматом? (отдельный drop-down для VE)

#### IS_SYSTEM

Системный или пользовательский?

#### ATTRIBUTES

HTML-атрибуты (формат JSON)

#### STYLES

inline-стили (формат JSON)

#### CREATED

Дата создания. Генерируется автоматически

#### MODIFIED­

Дата последнего изменения. Генерируется и изменяется автоматически.

#### LAST_MODIFIED_BY

ID последнего пользователя ([Таблица USERS](#таблица-users)), менявшего настройки

## Таблица VE_STYLE_FIELD_BIND


Хранит привязку стилей визуального редактора к полям (перекрывает настройки уровня сайта)


#### STYLE_ID

Идентификатор стиля ([Таблица VE_STYLE](#таблица-ve_style))

#### FIELD_ID

Идентификатор поля ([Таблица CONTENT_ATTRIBUTE](#таблица-content_attribute))

#### ON

Стиль используется/не используется

## Таблица VE_STYLE_SITE_BIND


Хранит привязку стилей визуального редактора к сайтам


#### STYLE_ID

Идентификатор стиля ([Таблица VE_STYLE](#таблица-ve_style))

#### SITE_ID

Идентификатор сайта ([Таблица SITE](#таблица-site))

#### ON

Стиль используется/не используется

## Таблица VIEW_TYPE


Хранит типы представлений для действий


#### ID

Идентификатор представления

#### NAME

Имя представления

#### CODE

Код представления

#### ICON

Иконка представления
